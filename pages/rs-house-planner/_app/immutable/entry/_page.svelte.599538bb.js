import{S as he,i as ge,s as ce,e as se,b as P,E as $,h as f,k as p,q as j,l as v,m as b,r as F,n as T,D as u,F as _e,u as Y,a as N,c as M,M as yt,N as K,O as Pe,P as Qe,o as _t,H as Q,Q as co,v as fe,d as A,f as de,g as H,I as _o,J as mo,K as uo,L as fo,R as mt,T as Ue,U as De,p as x,w as ho,V as ze,C as Xe,W as $e,y as pe,z as ve,A as be,B as ke,X as lt,G as go,Y as po}from"../chunks/index.32d6410e.js";import{p as vo}from"../chunks/stores.330ce4cd.js";import{j as Re}from"../chunks/singletons.ddd12585.js";Re.disable_scroll_handling;const Me=Re.goto;Re.invalidate;Re.invalidateAll;Re.preload_data;Re.preload_code;Re.before_navigate;Re.after_navigate;const Ee=[{level:0,rooms:0,extent:[0,0]},{level:1,rooms:21,extent:[3,3]},{level:15,rooms:21,extent:[4,4]},{level:30,rooms:21,extent:[5,5]},{level:38,rooms:22,extent:[5,5]},{level:44,rooms:23,extent:[5,5]},{level:45,rooms:23,extent:[6,6]},{level:50,rooms:24,extent:[6,6]},{level:56,rooms:25,extent:[6,6]},{level:60,rooms:25,extent:[7,7]},{level:62,rooms:26,extent:[7,7]},{level:68,rooms:27,extent:[7,7]},{level:74,rooms:28,extent:[7,7]},{level:80,rooms:29,extent:[7,7]},{level:86,rooms:30,extent:[7,7]},{level:92,rooms:31,extent:[7,7]},{level:96,rooms:32,extent:[7,7]},{level:99,rooms:33,extent:[7,7]}],we=9,Ie=9,bo=(n,e)=>{const o={house:n,num:e,rooms:[]};for(let t=0;t<Ie;t++){o.rooms.push([]);for(let l=0;l<we;l++)o.rooms[t].push(null)}return o},ko=n=>{const e=n.floors.map(d=>d.rooms).flat(2).filter(d=>!!d);let o=0,t=we,l=Ie,i=0,a=0,_=null;const s=[],r=[];let c=!1;for(const d of e)o+=d.type.cost,_=_&&d.type.minLvl<=_.type.minLvl?_:d,t=Math.min(t,d.x),i=Math.max(i,d.x),l=Math.min(l,d.y),a=Math.max(a,d.y),(d.type.key==="garden"||d.type.key==="formal_garden")&&(c=!0);if(c||s.push("You have must have at least one 'Garden' or 'Formal Garden' to place an exit portal!"),_&&r.push({name:"Highest Level Room",value:_.type.name,limit:"-",level:_.type.minLvl}),e.length>0){const d=Ee.find(k=>k.rooms>=e.length);if(d)r.push({name:"Number of Rooms",value:e.length,limit:d.rooms,level:d.level});else{const k=Ee[Ee.length-1].rooms;s.push(`You have too many rooms (${e.length})! You cannot have more than ${k}`)}}const m=Math.max(0,i-t+1);if(m>0){const d=Ee.find(k=>k.extent[0]>=m);if(d)r.push({name:"Extent X",value:m,limit:d.extent[0],level:d.level});else{const k=Ee[Ee.length-1].extent[0];s.push(`Your house is too wide (${m})! It can be at most ${k} wide`)}}const h=Math.max(0,a-l+1);if(h>0){const d=Ee.find(k=>k.extent[1]>=h);if(d)r.push({name:"Extent Y",value:h,limit:d.extent[1],level:d.level});else{const k=Ee[Ee.length-1].extent[1];s.push(`Your house is too tall (${h})! It can be at most ${k} tall`)}}return r.sort((d,k)=>k.level-d.level),{totalPrice:o,levelRequirements:r,extent:[m,h],errors:s}},Je=-1,it=1,io=(n="Default")=>{const e={name:n,floors:[]};for(let o=Je;o<=it;o++)e.floors.push(bo(e,o));return e};var Se=(n=>(n[n.North=0]="North",n[n.East=1]="East",n[n.South=2]="South",n[n.West=3]="West",n))(Se||{});const at=n=>Se[n].toLowerCase(),ut=(n,e=1)=>(n+=e)%4,rt=n=>(n==null?void 0:n.type.doors.map(e=>ut(e,n.orientation)))||[],Et=(n,e,o,t)=>({floor:n,x:e,y:o,type:t,orientation:Se.North,hotspots:Array(t.hotspots.length).fill(null)}),I=Se,qe=[{key:"garden",name:"Garden",cost:1e3,minLvl:1,doors:[I.North,I.East,I.South,I.West],bg:"#034a03",hotspots:[{name:"Centrepiece",options:[{id:"exit_portal",name:"Exit Portal",img:"/icons/garden/Exit_portal_icon.png"},{id:"decorative_rock",name:"Decorative Rock",img:"/icons/garden/Decorative_rock_icon.png"},{id:"pond",name:"Pond",img:"/icons/garden/Pond_icon.png"},{id:"imp_statue",name:"Imp Statue",img:"/icons/garden/Imp_statue_icon.png"},{id:"dungeon_entrance",name:"Dungeon Entrance",img:"/icons/garden/Dungeon_entrance_icon.png"}]},{name:"Tree",options:[{id:"tree",name:"Tree",img:"/icons/garden/Tree_Construction_icon.png"},{id:"nice_tree",name:"Nice Tree",img:"/icons/garden/Nice_tree_icon.png"},{id:"oak_tree",name:"Oak Tree",img:"/icons/garden/Oak_tree_icon.png"},{id:"willow_tree",name:"Willow_tree",img:"/icons/garden/Willow_tree_Construction_icon.png"},{id:"maple_tree",name:"Maple Tree",img:"/icons/garden/Maple_tree_Construction_icon.png"},{id:"yew_tree",name:"Yew Tree",img:"/icons/garden/Yew_tree_Construction_icon.png"},{id:"magic_tree",name:"Magic Tree",img:"/icons/garden/Magic_tree_Construction_icon.png"}]},{name:"Big Tree",options:[{id:"tree",name:"Tree",img:"/icons/garden/Tree_Construction_icon.png"},{id:"nice_tree",name:"Nice Tree",img:"/icons/garden/Nice_tree_icon.png"},{id:"oak_tree",name:"Oak Tree",img:"/icons/garden/Oak_tree_icon.png"},{id:"willow_tree",name:"Willow_tree",img:"/icons/garden/Willow_tree_Construction_icon.png"},{id:"maple_tree",name:"Maple Tree",img:"/icons/garden/Maple_tree_Construction_icon.png"},{id:"yew_tree",name:"Yew Tree",img:"/icons/garden/Yew_tree_Construction_icon.png"},{id:"magic_tree",name:"Magic Tree",img:"/icons/garden/Magic_tree_Construction_icon.png"}]},{name:"Small Plant 1",options:[{id:"plant",name:"Plant",img:"/icons/garden/Plant_icon.png"},{id:"small_fern",name:"Small Fern",img:"/icons/garden/Small_fern_icon.png"},{id:"fern",name:"Fern",img:"/icons/garden/Fern_small_plant_icon.png"}]},{name:"Small Plant 2",options:[{id:"dock_leaf",name:"Dock Leaf",img:"/icons/garden/Dock_leaf_icon.png"},{id:"thistle",name:"Thistle",img:"/icons/garden/Thistle_icon.png"},{id:"reeds",name:"Reeds",img:"/icons/garden/Reeds_icon.png"}]},{name:"Big Plant 1",options:[{id:"pumpkin",name:"Pumpkin",img:"/icons/garden/Pumpkin_icon.png"},{id:"beehive_1",name:"Beehive (Style 1)",img:"/icons/garden/Beehive_style_1_icon.png"},{id:"beehive_2",name:"Beehive (Style 2)",img:"/icons/garden/Beehive_style_2_icon.png"},{id:"big_fern",name:"Fern",img:"/icons/garden/Fern_big_plant_icon.png"},{id:"bush",name:"Big Bush",img:"/icons/garden/Bush_icon.png"},{id:"tall_plant",name:"Tall Plant",img:"/icons/garden/Tall_plant_icon.png"}]},{name:"Big Plant 2",options:[{id:"pumpkin",name:"Pumpkin",img:"/icons/garden/Pumpkin_icon.png"},{id:"beehive_1",name:"Beehive (Style 1)",img:"/icons/garden/Beehive_style_1_icon.png"},{id:"beehive_2",name:"Beehive (Style 2)",img:"/icons/garden/Beehive_style_2_icon.png"},{id:"short_plant",name:"Short Plant",img:"/icons/garden/Short_plant_icon.png"},{id:"large_leaf_bush",name:"Large Leaf Bush",img:"/icons/garden/Large_leaf_bush_icon.png"},{id:"huge_plant",name:"Huge Plant",img:"/icons/garden/Huge_plant_icon.png"}]},{name:"Tip jar",options:[{id:"tip_jar",name:"Tip Jar",img:"/icons/garden/Tip_jar_icon.png"}]}],open:!0,floors:[0]},{key:"parlour",name:"Parlour",cost:1e3,minLvl:1,doors:[I.East,I.South,I.West],bg:"#424242",hotspots:[{name:"Bookcase",options:[{id:"wooden_bookcase",name:"Wooden Bookcase",img:"/icons/parlour/Wooden_bookcase_icon.png"},{id:"oak_bookcase",name:"Oak Bookcase",img:"/icons/parlour/Oak_bookcase_icon.png"},{id:"mahogany_bookcase",name:"Mahogany Bookcase",img:"/icons/parlour/Mahogany_bookcase_icon.png"}]},{name:"Chairs",options:[{id:"crude_wooden_chair",name:"Crude Wooden Chair",img:"/icons/parlour/Crude_wooden_chair_icon.png"},{id:"wooden_chair",name:"Wooden Chair",img:"/icons/parlour/Wooden_chair_icon.png"},{id:"rocking_chair",name:"Rocking Char",img:"/icons/parlour/Rocking_chair_icon.png"},{id:"oak_chair",name:"Oak Chair",img:"/icons/parlour/Oak_chair_icon.png"},{id:"oak_armchair",name:"Oak Armchair",img:"/icons/parlour/Oak_armchair_icon.png"},{id:"teak_armchair",name:"Teak Armchair",img:"/icons/parlour/Teak_armchair_icon.png"},{id:"mahogany_armchair",name:"Mahogany Armchair",img:"/icons/parlour/Mahogany_armchair_icon.png"}]},{name:"Curtains",options:[{id:"torn_curtains",name:"Torn Curtains",img:"/icons/parlour/Torn_curtains_icon.png"},{id:"curtains",name:"Curtains",img:"/icons/parlour/Curtains_icon.png"},{id:"opulent_curtains",name:"Opulent Curtains",img:"/icons/parlour/Opulent_curtains_icon.png"},{id:"raging_echoes_curtains",name:"Raging Echoes Curtains",img:"/icons/parlour/Raging_echoes_curtains_icon.png"}]},{name:"Fireplace",options:[{id:"clay_fireplace",name:"Clay Fireplace",img:"/icons/parlour/Clay_fireplace_icon.png"},{id:"stone_fireplace",name:"Stone Fireplace",img:"/icons/parlour/Stone_fireplace_icon.png"},{id:"marble_fireplace",name:"Marble Fireplace",img:"/icons/parlour/Marble_fireplace_icon.png"}]},{name:"Rug",options:[{id:"brown_rug",name:"Brown Rug",img:"/icons/parlour/Brown_rug_icon.png"},{id:"rug",name:"Rug",img:"/icons/parlour/Rug_icon.png"},{id:"deadman_rug",name:"Deadman Rug",img:"/icons/parlour/Deadman_rug_icon.png"},{id:"opulent_rug",name:"Opulent Rug",img:"/icons/parlour/Opulent_rug_icon.png"},{id:"raging_echoes_rug",name:"Raging Echoes Rug",img:"/icons/parlour/Raging_echoes_rug_icon.png"}]}]},{key:"kitchen",name:"Kitchen",cost:5e3,minLvl:5,doors:[I.East,I.South],bg:"#542808",hotspots:[{name:"Barrel",options:[{id:"beer_barrel",name:"Beer Barrel",img:"/icons/kitchen/Beer_barrel_icon.png"},{id:"cider_barrel",name:"Cider Barrel",img:"/icons/kitchen/Cider_barrel_icon.png"},{id:"asgarnian_ale",name:"Asgarnian Ale",img:"/icons/kitchen/Asgarnian_ale_barrel_icon.png"},{id:"greenmans_ale",name:"Greenman's Ale",img:"/icons/kitchen/Greenmans_ale_barrel_icon.png"},{id:"dragon_bitter",name:"Dragon Bitter",img:"/icons/kitchen/Dragon_bitter_barrel_icon.png"},{id:"chefs_delight",name:"Chef's Delight",img:"/icons/kitchen/Chefs_delight_barrel_icon.png"}]},{name:"Cat Basket",options:[{id:"cat_blanket",name:"Cat Blanket",img:"/icons/kitchen/Cat_blanket_icon.png"},{id:"cat_basket",name:"Cat Basket",img:"/icons/kitchen/Cat_basket_icon.png"},{id:"cushioned_basket",name:"Cushioned Basket",img:"/icons/kitchen/Cushioned_basket_icon.png"}]},{name:"Larder",options:[{id:"wooden_larder",name:"Wooden Larder",img:"/icons/kitchen/Wooden_larder_icon.png"},{id:"oak_larder",name:"Oak Larder",img:"/icons/kitchen/Oak_larder_icon.png"},{id:"teak_larder",name:"Teak Larder",img:"/icons/kitchen/Teak_larder_icon.png"}]},{name:"Shelf",options:[{id:"wooden_shelves_1",name:"Wooden Shelves 1",img:"/icons/kitchen/Wooden_shelves_1_icon.png"},{id:"wooden_shelves_2",name:"Wooden Shelves 2",img:"/icons/kitchen/Wooden_shelves_2_icon.png"},{id:"wooden_shelves_3",name:"Wooden Shelves 3",img:"/icons/kitchen/Wooden_shelves_3_icon.png"},{id:"oak_shelves_1",name:"Oak Shelves 1",img:"/icons/kitchen/Oak_shelves_1_icon.png"},{id:"oak_shelves_2",name:"Oak Shelves 2",img:"/icons/kitchen/Oak_shelves_2_icon.png"},{id:"teak_shelves_1",name:"Teak Shelves 1",img:"/icons/kitchen/Teak_shelves_1_icon.png"},{id:"teak_shelves_2",name:"Teak Shelves 2",img:"/icons/kitchen/Teak_shelves_2_icon.png"}]},{name:"Sink",options:[{id:"pump_and_drain",name:"Pump and Drain",img:"/icons/kitchen/Pump_and_drain_icon.png"},{id:"pump_and_tub",name:"Pump and Tub",img:"/icons/kitchen/Pump_and_tub_icon.png"},{id:"sink",name:"Sink",img:"/icons/kitchen/Sink_icon.png"},{id:"gold_sink",name:"Gold Sink",img:"/icons/kitchen/Gold_sink_icon.png"}]},{name:"Spice Rack",options:[{id:"spice_rack",name:"Spice Rack",img:"/icons/kitchen/Spice_rack_icon.png"}]},{name:"Stove",options:[{id:"firepit",name:"Firepit",img:"/icons/kitchen/Firepit_icon.png"},{id:"firepit_with_hook",name:"Firepit With Hook",img:"/icons/kitchen/Firepit_with_hook_icon.png"},{id:"firepit_with_pot",name:"Firepit With Pot",img:"/icons/kitchen/Firepit_with_pot_icon.png"},{id:"small_oven",name:"Small Oven",img:"/icons/kitchen/Small_oven_icon.png"},{id:"large_oven",name:"Large Oven",img:"/icons/kitchen/Large_oven_icon.png"},{id:"steel_range",name:"Steel Range",img:"/icons/kitchen/Steel_range_icon.png"},{id:"fancy_range",name:"Fancy Range",img:"/icons/kitchen/Fancy_range_icon.png"}]},{name:"Table",options:[{id:"kitchen_table",name:"Kitchen Table",img:"/icons/kitchen/Kitchen_table_icon.png"},{id:"oak_table",name:"Oak Table",img:"/icons/kitchen/Oak_kitchen_table_icon.png"},{id:"teak_table",name:"Teak Table",img:"/icons/kitchen/Teak_kitchen_table_icon.png"}]}]},{key:"dining_room",name:"Dining Room",cost:5e3,minLvl:10,doors:[I.East,I.South,I.West],bg:"#424242",hotspots:[]},{key:"workshop",name:"Workshop",cost:1e4,minLvl:15,doors:[I.North,I.South],bg:"#542808",hotspots:[]},{key:"bedroom",name:"Bedroom",cost:1e4,minLvl:20,doors:[I.East,I.South],bg:"#424242",hotspots:[{name:"Bed",options:[{id:"wooden_bed",name:"Wooden Bed",img:"/icons/bedroom/Wooden_bed_icon.png"},{id:"oak_bed",name:"Oak Bed",img:"/icons/bedroom/Oak_bed_icon.png"},{id:"large_oak_bed",name:"Large Oak Bed",img:"/icons/bedroom/Large_oak_bed_icon.png"},{id:"teak_bed",name:"Teak Bed",img:"/icons/bedroom/Teak_bed_icon.png"},{id:"large_teak_bed",name:"Large Teak Bed",img:"/icons/bedroom/Large_teak_bed_icon.png"},{id:"4_poster",name:"4-Poster",img:"/icons/bedroom/4-poster_icon.png"},{id:"gilded_4_poster",name:"Gilded 4-Poster",img:"/icons/bedroom/Gilded_4-poster_icon.png"}]},{name:"Corner",options:[{id:"oak_clock",name:"Oak Clock",img:"/icons/bedroom/Oak_clock_icon.png"},{id:"teak_clock",name:"Teak Clock",img:"/icons/bedroom/Teak_clock_icon.png"},{id:"servants_money_bag",name:"Servant's Money Bag",img:"/icons/bedroom/Servants_money_bag_icon.png"},{id:"gilded_clock",name:"Gilded Clock",img:"/icons/bedroom/Gilded_clock_icon.png"}]},{name:"Curtains",options:[{id:"torn_curtains",name:"Torn Curtains",img:"/icons/parlour/Torn_curtains_icon.png"},{id:"curtains",name:"Curtains",img:"/icons/parlour/Curtains_icon.png"},{id:"opulent_curtains",name:"Opulent Curtains",img:"/icons/parlour/Opulent_curtains_icon.png"},{id:"raging_echoes_curtains",name:"Raging Echoes Curtains",img:"/icons/parlour/Raging_echoes_curtains_icon.png"}]},{name:"Dresser",options:[{id:"shaving_stand",name:"Shaving Stand",img:"/icons/bedroom/Shaving_stand_icon.png"},{id:"oak_shaving_stand",name:"Oak Shaving Stand",img:"/icons/bedroom/Oak_shaving_stand_icon.png"},{id:"oak_dresser",name:"Oak Dresser",img:"/icons/bedroom/Oak_dresser_icon.png"},{id:"teak_dresser",name:"Teak Dresser",img:"/icons/bedroom/Teak_dresser_icon.png"},{id:"fancy_teak_dresser",name:"Fancy Teak Dresser",img:"/icons/bedroom/Fancy_teak_dresser_icon.png"},{id:"mahogany_dresser",name:"Mahogany Dresser",img:"/icons/bedroom/Mahogany_dresser_icon.png"},{id:"Gilded_dresser",name:"Gilded Dresser",img:"/icons/bedroom/Gilded_dresser_icon.png"}]},{name:"Fireplace",options:[{id:"clay_fireplace",name:"Clay Fireplace",img:"/icons/parlour/Clay_fireplace_icon.png"},{id:"stone_fireplace",name:"Stone Fireplace",img:"/icons/parlour/Stone_fireplace_icon.png"},{id:"marble_fireplace",name:"Marble Fireplace",img:"/icons/parlour/Marble_fireplace_icon.png"}]},{name:"Rug",options:[{id:"brown_rug",name:"Brown Rug",img:"/icons/parlour/Brown_rug_icon.png"},{id:"rug",name:"Rug",img:"/icons/parlour/Rug_icon.png"},{id:"deadman_rug",name:"Deadman Rug",img:"/icons/parlour/Deadman_rug_icon.png"},{id:"opulent_rug",name:"Opulent Rug",img:"/icons/parlour/Opulent_rug_icon.png"},{id:"raging_echoes_rug",name:"Raging Echoes Rug",img:"/icons/parlour/Raging_echoes_rug_icon.png"}]},{name:"Wardrobe",options:[{id:"shoe_box",name:"Shoe Box",img:"/icons/bedroom/Shoe_box_icon.png"},{id:"oak_drawer",name:"Oak Drawers",img:"/icons/bedroom/Oak_drawers_icon.png"},{id:"oak_wardrobe",name:"Oak Wardrobe",img:"/icons/bedroom/Oak_wardrobe_icon.png"},{id:"teak_drawer",name:"Teak Drawers",img:"/icons/bedroom/Teak_drawers_icon.png"},{id:"teak_wardrobe",name:"Teak Wardrobe",img:"/icons/bedroom/Teak_wardrobe_icon.png"},{id:"mahogany_wardrobe",name:"Mahogany Wardrobe",img:"/icons/bedroom/Mahogany_wardrobe_icon.png"},{id:"gilded_wardrobe",name:"Gilded Wardrobe",img:"/icons/bedroom/Gilded_wardrobe_icon.png"}]}]},{key:"skill_hall",name:"Skill Hall",cost:15e3,minLvl:25,doors:[I.North,I.East,I.South,I.West],bg:"#3f0569",hotspots:[],stairs:!0},{key:"league_hall",name:"Leauge Hall",cost:15e3,minLvl:27,doors:[I.East,I.West],bg:"#3f0569",hotspots:[],stairs:!0},{key:"games_room",name:"Games Room",cost:25e3,minLvl:30,doors:[I.East,I.South,I.West],bg:"#731e4c",hotspots:[]},{key:"combat_room",name:"Combat Room",cost:25e3,minLvl:30,doors:[I.East,I.South,I.West],bg:"#731e4c",hotspots:[]},{key:"quest_hall",name:"Quest Hall",cost:25e3,minLvl:32,doors:[I.North,I.East,I.South,I.West],bg:"#3f0569",hotspots:[],stairs:!0},{key:"menagerie",name:"Menagerie",cost:3e4,minLvl:37,doors:[I.North,I.East,I.South,I.West],bg:"#034a03",hotspots:[],open:!0,floors:[0]},{key:"study",name:"Study",cost:5e4,minLvl:40,doors:[I.East,I.South,I.West],bg:"#542808",hotspots:[]},{key:"costume_room",name:"Costume Room",cost:5e4,minLvl:42,doors:[I.South],bg:"#731e4c",hotspots:[]},{key:"chapel",name:"Chapel",cost:5e4,minLvl:45,doors:[I.East,I.South],bg:"#542808",hotspots:[]},{key:"portal_chamber",name:"Portal Chamber",cost:1e5,minLvl:50,doors:[I.South],bg:"#542808",hotspots:[]},{key:"formal_garden",name:"Formal Garden",cost:75e3,minLvl:55,doors:[I.North,I.East,I.South,I.West],bg:"#034a03",hotspots:[],open:!0,floors:[0]},{key:"throne_room",name:"Throne Room",cost:15e4,minLvl:60,doors:[I.South],bg:"#040459",hotspots:[],floors:[0]},{key:"superior_garden",name:"Superior Garden",cost:75e3,minLvl:65,doors:[I.North,I.East,I.South,I.West],bg:"#034a03",hotspots:[{name:"Fence space",options:[{id:"redwood_fence",name:"Redwood fence",img:"/icons/Redwood_fence_icon.png"},{id:"marble_wall",name:"Marble wall",img:"/icons/marble_wall.png"},{id:"obsidian_fence",name:"Obsidian fence",img:"/icons/obsidian_fence.png"}]},{name:"Pool space",options:["restoration_pool","revitalisation_pool","rejuvenation_pool","fancy_rejuvenation_pool","ornate_rejuvenation_pool"]},{name:"Teleport Space",options:["spirit_tree","obelisk","fairy_ring","spirit_tree_fairy_ring"]},{name:"Theme",options:["zen_theme","otherworldly_theme","volcanic_theme"]},{name:"Topiary space",options:["topiary_bush"]},{name:"Seating space",options:["teak_garden_bench","gnome_bench","marble_decorative_bench","obsidian_decorative_bench"]}],floors:[0]},{key:"oubliette",name:"Oubliette",cost:15e4,minLvl:65,doors:[I.North,I.East,I.South,I.West],bg:"#800303",hotspots:[],floors:[-1]},{key:"dungeon_corridor",name:"Dungeon Corridor",cost:7500,minLvl:70,doors:[I.North,I.South],bg:"#800303",hotspots:[],floors:[-1]},{key:"dungeon_junction",name:"Dungeon Junction",cost:7500,minLvl:70,doors:[I.North,I.East,I.South,I.West],bg:"#800303",hotspots:[],floors:[-1]},{key:"dungeon_stairs",name:"Dungeon Stairs",cost:7500,minLvl:70,doors:[I.North,I.East,I.South,I.West],bg:"#800303",hotspots:[],stairs:!0,floors:[-1]},{key:"dungeon_pit",name:"Dungeon Pit",cost:1e4,minLvl:70,doors:[I.North,I.East,I.South,I.West],bg:"#800303",hotspots:[],floors:[-1]},{key:"treasure_room",name:"Treasure Room",cost:25e4,minLvl:75,doors:[I.South],bg:"#800303",hotspots:[],floors:[-1]},{key:"portal_nexus",name:"Portal nexus",cost:2e5,minLvl:72,doors:[I.North,I.East,I.South,I.West],bg:"#542808",hotspots:[],floors:[0]},{key:"achievement_gallery",name:"Achievement gallery",cost:2e5,minLvl:80,doors:[I.North,I.South],bg:"#3f0569",hotspots:[{name:"Adventure log",options:["mahogany_adventure_log","gilded_adventure_log","marble_adventure_log"]},{name:"Altar",options:["ancient_altar","lunar_altar","dark_altar","occult_altar"]},{name:"Boss lair",options:["boss_lair_display"]},{name:"Display",options:["mounted_emblem","mounted_coins","cape_hanger"]},{name:"Jewellery box",options:["basic_jewellery_box","fancy_jewellery_box","ornate_jewellery_box"]},{name:"Quest list",options:["quest_list"]}],floors:[0]}],st=new Map;for(const n of qe){if(st.has(n.key))throw new Error(`Duplicate room type ${n.key}`);st.set(n.key,n)}const ao=n=>{const e=st.get(n);if(!e)throw new Error(`Unknown room type ${n}`);return e},ft=[{key:"exit_portal",name:"Exit Portal",minLvl:1,exp:100,materials:{iron_bar:10}},{key:"decorative_rock",name:"Decorative Rock",minLvl:5,exp:100,materials:{limestone_brick:5}},{key:"pond",name:"Pond",minLvl:10,exp:100,materials:{soft_clay:10}},{key:"imp_statue",name:"Imp Statue",minLvl:15,exp:150,materials:{limestone_brick:5,soft_clay:5}},{key:"dungeon_entrance",name:"Dungeon Entrance",minLvl:70,exp:500,materials:{marble_block:1}},{key:"plant",name:"Plant",minLvl:1,exp:31,materials:{bagged_plant_1:1}},{key:"small_fern",name:"Small Fern",minLvl:6,exp:70,materials:{bagged_plant_2:1}},{key:"fern",name:"Fern",minLvl:12,exp:100,materials:{bagged_plant_3:1}},{key:"dock_leaf",name:"Dock Leaf",minLvl:1,exp:31,materials:{bagged_plant_1:1}},{key:"thistle",name:"Thistle",minLvl:6,exp:70,materials:{bagged_plant_2:1}},{key:"reeds",name:"Reeds",minLvl:12,exp:100,materials:{bagged_plant_3:1}},{key:"redwood_fence",name:"Redwood Fence",minLvl:75,exp:240,materials:{redwood_logs:10,steel_bar:2}},{key:"marble_wall",name:"Marble Wall",minLvl:79,exp:4e3,materials:{marble_block:8}},{key:"obsidian_fence",name:"Obsidian Fence",minLvl:83,exp:2741,materials:{toktz_mej_tal:10,tzhaar_ket_om:2,toktz_xil_ul:25}},{key:"restoration_pool",name:"Restoration pool",minLvl:65,exp:706,materials:{limestone_brick:5,bucket_of_water:5,soul_rune:1e3,body_rune:1e3}},{key:"revitalisation_pool",name:"Revitalisation pool",minLvl:70,exp:850,materials:{restoration_pool:1,stamina_potion_4_unnoted:10}},{key:"rejuvenation_pool",name:"Rejuvenation pool",minLvl:80,exp:900,materials:{revitalisation_pool:1,prayer_potion_4_unnoted:10}},{key:"fancy_rejuvenation_pool",name:"Fancy rejuvenation pool",minLvl:85,exp:1950,materials:{rejuvenation_pool:1,super_restore_4_unnoted:10,marble_block:2}},{key:"ornate_rejuvenation_pool",name:"Ornate rejuvenation pool",minLvl:90,exp:3107,materials:{fancy_rejuvenation_pool:1,anti_venom_4_unnoted:10,gold_leaf:5,blood_rune:1e3}},{key:"spirit_tree",name:"Spirit tree",minLvl:75,exp:350,materials:{spirit_sapling:1}},{key:"obelisk",name:"Obelisk",minLvl:80,exp:3e3,materials:{ancient_crystal:4,marble_block:4}},{key:"fairy_ring",name:"Fairy ring",minLvl:85,exp:535,materials:{mushroom:10,fairy_enchantment:1}},{key:"spirit_tree_fairy_ring",name:"Spirit tree & Fairy ring",minLvl:95,exp:885,materials:{spirit_sapling:1,mushroom:10,fairy_enchantment:1}},{key:"zen_theme",name:"Zen theme",minLvl:65,exp:474,materials:{bucket_of_sand:6,pink_dye:1,bagged_nice_tree:1}},{key:"otherworldly_theme",name:"Otherworldly theme",minLvl:75,exp:316,materials:{supercompost:8,blue_dye:1,mushroom:4,magic_secateurs:1}},{key:"volcanic_theme",name:"Volcanic theme",minLvl:85,exp:4464,materials:{granite_5kg:2,onyx:6,fire_rune:1e3,lava_rune:2e3}},{key:"topiary_bush",name:"Topiary bush",minLvl:65,exp:141,materials:{topiary_hedge_bagged:6}},{key:"teak_garden_bench",name:"Teak garden bench",minLvl:66,exp:540,materials:{teak_planks:6}},{key:"gnome_bench",name:"Gnome bench",minLvl:77,exp:840,materials:{mahogany_planks:6}},{key:"marble_decorative_bench",name:"Marble decorative bench",minLvl:88,exp:3e3,materials:{marble_block:6}},{key:"obsidian_decorative_bench",name:"Obsidian decorative bench",minLvl:98,exp:2331,materials:{marble_block:3,onyx:1,fire_rune:250,lava_rune:500}},{key:"mahogany_adventure_log",name:"Mahogany adventure log",minLvl:83,exp:504,materials:{mahogany_plank:3,papyrus:2,enchanted_gem:1}},{key:"gilded_adventure_log",name:"Gilded adventure log",minLvl:88,exp:1100,materials:{mahogany_plank:3,gold_leaf:2,enchanted_gem:1}},{key:"marble_adventure_log",name:"Marble adventure log",minLvl:93,exp:1160,materials:{marble_block:2,limestone_brick:4,enchanted_gem:1}},{key:"ancient_altar",name:"Ancient altar",minLvl:80,exp:1490,materials:{limestone_brick:10,magic_stone:1,ancient_signet:1,pharaohs_sceptre:1}},{key:"lunar_altar",name:"Lunar altar",minLvl:80,exp:1957,materials:{limestone_brick:10,magic_stone:1,lunar_signet:1,astral_rune:1e4}},{key:"dark_altar",name:"Dark altar",minLvl:80,exp:3888,materials:{limestone_brick:10,magic_stone:1,arceuus_signet:1,blood_rune:5e3,soul_rune:5e3}},{key:"occult_altar",name:"Occult altar",minLvl:90,exp:3445,materials:{Materials_for_the_other_two_altars_the_player_hasnt_built_excluding_the_magic_stone_and_limestone_bricks:0}},{key:"boss_lair_display",name:"Boss lair display",minLvl:87,exp:1483,materials:{steel_bar:4,molten_glass:5,mahogany_plank:10}},{key:"mounted_emblem",name:"Mounted emblem",minLvl:80,exp:5300,materials:{marble_block:1,gold_leaf:1,decorative_emblem:1}},{key:"mounted_coins",name:"Mounted coins",minLvl:80,exp:800,materials:{marble_block:1,gold_leaf:1,coins:1e8}},{key:"cape_hanger",name:"Cape hanger",minLvl:80,exp:800,materials:{marble_block:1,gold_leaf:1}},{key:"basic_jewellery_box",name:"Basic jewellery box",minLvl:81,exp:605,materials:{bolt_of_cloth:1,steel_bar:1,games_necklace_8:3,ring_of_dueling_8:3}},{key:"fancy_jewellery_box",name:"Fancy jewellery box",minLvl:86,exp:1350,materials:{basic_jewellery_box:1,gold_leaf:1,skills_necklace_4:5,combat_bracelet_4:5}},{key:"ornate_jewellery_box",name:"Ornate jewellery box",minLvl:91,exp:2680,materials:{fancy_jewellery_box:1,gold_leaf:2,amulet_of_glory_4:8,ring_of_wealth_5:8}},{key:"quest_list",name:"Quest list",minLvl:80,exp:310,materials:{papyrus:10,gold_leaf:1}},{key:"wooden_bed",name:"Wooden bed",minLvl:20,exp:117,materials:{plank:3,nails:3,bolt_of_cloth:2}},{key:"oak_bed",name:"Oak bed",minLvl:30,exp:210,materials:{oak_plank:3,bolt_of_cloth:2}},{key:"large_oak_bed",name:"Large oak bed",minLvl:34,exp:330,materials:{oak_plank:5,bolt_of_cloth:2}},{key:"teak_bed",name:"Teak bed",minLvl:40,exp:300,materials:{teak_plank:3,bolt_of_cloth:2}},{key:"large_teak_bed",name:"Large teak bed",minLvl:45,exp:480,materials:{teak_plank:5,bolt_of_cloth:2}},{key:"4_poster",name:"4-poster",minLvl:53,exp:450,materials:{mahogany_plank:3,bolt_of_cloth:2}},{key:"gilded_4_poster",name:"Gilded 4-poster",minLvl:60,exp:1330,materials:{mahogany_plank:5,bolt_of_cloth:2,gold_leaf:2}},{key:"oak_clock",name:"Oak clock",minLvl:25,exp:142,materials:{oak_plank:2,clockwork:1}},{key:"teak_clock",name:"Teak clock",minLvl:55,exp:202,materials:{teak_plank:2,clockwork:1}},{key:"servants_money_bag",name:"Servants Money Bag",minLvl:58,exp:595,materials:{mahogany_plank:2,bolt_of_cloth:1,gold_leaf:1}},{key:"gilded_clock",name:"Gilded clock",minLvl:85,exp:602,materials:{mahogany_plank:2,clockwork:1,gold_leaf:1}}],ct=new Map;for(const n of ft){if(ct.has(n.key))throw new Error(`Duplicate furniture type ${n.key}`);ct.set(n.key,n)}const dt=n=>{if(!n)return null;const e=ct.get(n);return e||{key:n,name:n.split("_").map(o=>o.charAt(0).toUpperCase()+o.slice(1)).join(" "),minLvl:1,exp:0,materials:{}}},yo=(n,e)=>{if(!n)return null;const o=n.hotspots.map(t=>{if(!t)return"";const l=ft.indexOf(t);return l!==-1?l:"id"in t?`k:${t.id}`:`k:${t.key}`}).join("-");return`${e}-${qe.indexOf(n.type)}-${n.orientation}-${o}`},Oe=n=>{const e=new URLSearchParams;e.set("n",n.name);for(const o of n.floors){const t=o.rooms.flat().map(yo).filter(l=>!!l).join(".");e.set(`f${o.num}`,t)}return e},Eo=(n,e)=>{const o=e.split("-"),t=Number(o[0]),l=t%we,i=Math.floor(t/we),a=qe[Number(o[1])];if(!a)throw new Error(`Unknown room type ${o[1]}`);const _=Number(o[2]),s=[];for(let r=0;r<a.hotspots.length;r++){const c=o[r+3];if(!c)s[r]=null;else if(c.startsWith("k:")){const m=c.substring(2);s[r]=dt(m)}else s[r]=ft[Number(c)]||null}return{floor:n,x:l,y:i,type:a,orientation:_,hotspots:s}},ro=n=>{const e=n.get("n")||void 0,o=io(e);for(const t of n.keys()){if(!t.startsWith("f"))continue;const l=Number(t.substring(1)),i=o.floors.find(_=>_.num===l);if(!i)throw new Error(`Unknown floor ${l}`);const a=n.get(t);if(a){const _=a.split(".");for(const s of _){const r=Eo(i,s);i.rooms[r.y][r.x]=r}}}return o};function wt(n,e,o){const t=n.slice();return t[1]=e[o],t}function wo(n){let e,o;return{c(){e=p("div"),o=j("Your house looks good to go!"),this.h()},l(t){e=v(t,"DIV",{class:!0});var l=b(e);o=F(l,"Your house looks good to go!"),l.forEach(f),this.h()},h(){T(e,"class","alert success svelte-159br2x")},m(t,l){P(t,e,l),u(e,o)},p:$,d(t){t&&f(e)}}}function To(n){let e,o=n[0],t=[];for(let l=0;l<o.length;l+=1)t[l]=Tt(wt(n,o,l));return{c(){for(let l=0;l<t.length;l+=1)t[l].c();e=se()},l(l){for(let i=0;i<t.length;i+=1)t[i].l(l);e=se()},m(l,i){for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(l,i);P(l,e,i)},p(l,i){if(i&1){o=l[0];let a;for(a=0;a<o.length;a+=1){const _=wt(l,o,a);t[a]?t[a].p(_,i):(t[a]=Tt(_),t[a].c(),t[a].m(e.parentNode,e))}for(;a<t.length;a+=1)t[a].d(1);t.length=o.length}},d(l){_e(t,l),l&&f(e)}}}function Tt(n){let e,o=n[1]+"",t;return{c(){e=p("div"),t=j(o),this.h()},l(l){e=v(l,"DIV",{class:!0});var i=b(e);t=F(i,o),i.forEach(f),this.h()},h(){T(e,"class","alert error svelte-159br2x")},m(l,i){P(l,e,i),u(e,t)},p(l,i){i&1&&o!==(o=l[1]+"")&&Y(t,o)},d(l){l&&f(e)}}}function Lo(n){let e;function o(i,a){return i[0].length>0?To:wo}let t=o(n),l=t(n);return{c(){l.c(),e=se()},l(i){l.l(i),e=se()},m(i,a){l.m(i,a),P(i,e,a)},p(i,[a]){t===(t=o(i))&&l?l.p(i,a):(l.d(1),l=t(i),l&&(l.c(),l.m(e.parentNode,e)))},i:$,o:$,d(i){l.d(i),i&&f(e)}}}function So(n,e,o){let{errors:t}=e;return n.$$set=l=>{"errors"in l&&o(0,t=l.errors)},[t]}class Do extends he{constructor(e){super(),ge(this,e,So,Lo,ce,{errors:0})}}function Lt(n,e,o){const t=n.slice();return t[10]=e[o],t}function St(n){let e,o,t=n[10]+"",l,i,a,_,s,r,c,m,h,d,k,B,E;function D(){return n[7](n[10])}function y(){return n[8](n[10])}return{c(){e=p("div"),o=p("div"),l=j(t),i=N(),a=p("div"),_=p("button"),s=p("i"),c=N(),m=p("div"),h=p("button"),d=p("i"),k=N(),this.h()},l(w){e=v(w,"DIV",{class:!0});var R=b(e);o=v(R,"DIV",{class:!0});var g=b(o);l=F(g,t),g.forEach(f),i=M(R),a=v(R,"DIV",{class:!0});var L=b(a);_=v(L,"BUTTON",{});var S=b(_);s=v(S,"I",{class:!0}),b(s).forEach(f),S.forEach(f),L.forEach(f),c=M(R),m=v(R,"DIV",{class:!0});var O=b(m);h=v(O,"BUTTON",{});var C=b(h);d=v(C,"I",{class:!0}),b(d).forEach(f),C.forEach(f),O.forEach(f),k=M(R),R.forEach(f),this.h()},h(){T(o,"class","name svelte-1ueo926"),T(s,"class","icofont-folder-open"),_.disabled=r=n[10]===n[0].name,T(a,"class","svelte-1ueo926"),T(d,"class","icofont-ui-delete"),T(m,"class","svelte-1ueo926"),T(e,"class","svelte-1ueo926"),Q(e,"current",n[10]===n[0].name)},m(w,R){P(w,e,R),u(e,o),u(o,l),u(e,i),u(e,a),u(a,_),u(_,s),u(e,c),u(e,m),u(m,h),u(h,d),u(e,k),B||(E=[K(_,"click",D),K(h,"click",y)],B=!0)},p(w,R){n=w,R&2&&t!==(t=n[10]+"")&&Y(l,t),R&3&&r!==(r=n[10]===n[0].name)&&(_.disabled=r),R&3&&Q(e,"current",n[10]===n[0].name)},d(w){w&&f(e),B=!1,Pe(E)}}}function Ro(n){let e,o,t,l,i,a,_,s,r,c,m,h,d,k,B,E,D,y,w,R,g,L=n[1],S=[];for(let O=0;O<L.length;O+=1)S[O]=St(Lt(n,L,O));return{c(){e=p("h2"),o=j("Getting started"),t=N(),l=p("ul"),i=p("li"),a=j("Click a cell to the left to place a new room"),_=N(),s=p("h2"),r=j("Saved houses"),c=N(),m=p("div"),h=p("div"),d=p("div"),k=p("input"),B=N(),E=p("div"),D=p("button"),y=p("i"),w=N();for(let O=0;O<S.length;O+=1)S[O].c();this.h()},l(O){e=v(O,"H2",{class:!0});var C=b(e);o=F(C,"Getting started"),C.forEach(f),t=M(O),l=v(O,"UL",{class:!0});var W=b(l);i=v(W,"LI",{});var q=b(i);a=F(q,"Click a cell to the left to place a new room"),q.forEach(f),W.forEach(f),_=M(O),s=v(O,"H2",{class:!0});var z=b(s);r=F(z,"Saved houses"),z.forEach(f),c=M(O),m=v(O,"DIV",{class:!0});var G=b(m);h=v(G,"DIV",{class:!0});var U=b(h);d=v(U,"DIV",{class:!0});var oe=b(d);k=v(oe,"INPUT",{type:!0}),oe.forEach(f),B=M(U),E=v(U,"DIV",{class:!0});var ne=b(E);D=v(ne,"BUTTON",{});var le=b(D);y=v(le,"I",{class:!0}),b(y).forEach(f),le.forEach(f),ne.forEach(f),U.forEach(f),w=M(G);for(let ee=0;ee<S.length;ee+=1)S[ee].l(G);G.forEach(f),this.h()},h(){T(e,"class","svelte-1ueo926"),T(l,"class","svelte-1ueo926"),T(s,"class","svelte-1ueo926"),T(k,"type","text"),T(d,"class","name svelte-1ueo926"),T(y,"class","icofont-save"),T(E,"class","svelte-1ueo926"),T(h,"class","svelte-1ueo926"),T(m,"class","houses-list svelte-1ueo926")},m(O,C){P(O,e,C),u(e,o),P(O,t,C),P(O,l,C),u(l,i),u(i,a),P(O,_,C),P(O,s,C),u(s,r),P(O,c,C),P(O,m,C),u(m,h),u(h,d),u(d,k),yt(k,n[0].name),u(h,B),u(h,E),u(E,D),u(D,y),u(m,w);for(let W=0;W<S.length;W+=1)S[W]&&S[W].m(m,null);R||(g=[K(k,"input",n[5]),K(D,"click",n[6])],R=!0)},p(O,[C]){if(C&1&&k.value!==O[0].name&&yt(k,O[0].name),C&27){L=O[1];let W;for(W=0;W<L.length;W+=1){const q=Lt(O,L,W);S[W]?S[W].p(q,C):(S[W]=St(q),S[W].c(),S[W].m(m,null))}for(;W<S.length;W+=1)S[W].d(1);S.length=L.length}},i:$,o:$,d(O){O&&f(e),O&&f(t),O&&f(l),O&&f(_),O&&f(s),O&&f(c),O&&f(m),_e(S,O),R=!1,Pe(g)}}}function Oo(n,e,o){let{house:t}=e,l=[];const i=Qe();_t(()=>{const d=localStorage.getItem("houses");d&&o(1,l=JSON.parse(d))});const a=d=>{o(1,l=l.includes(d.name)?l:[...l,d.name]);const k=Oe(d).toString();localStorage.setItem(`house-${d.name}`,k),localStorage.setItem("houses",JSON.stringify(l)),i("save",{house:d})},_=d=>{const k=localStorage.getItem(`house-${d}`);if(k){const B=ro(new URLSearchParams(k));i("open",{house:B})}},s=d=>{o(1,l=l.filter(k=>k!==d)),localStorage.removeItem(`house-${d}`),localStorage.setItem("houses",JSON.stringify(l))};function r(){t.name=this.value,o(0,t)}const c=()=>a(t),m=d=>_(d),h=d=>s(d);return n.$$set=d=>{"house"in d&&o(0,t=d.house)},[t,l,a,_,s,r,c,m,h]}class Io extends he{constructor(e){super(),ge(this,e,Oo,Ro,ce,{house:0})}}function Dt(n,e,o){const t=n.slice();return t[2]=e[o],t}function Rt(n){let e,o,t=n[2].name+"",l,i,a,_=n[2].value+"",s,r,c,m=n[2].limit+"",h,d,k,B=n[2].level+"",E,D;return{c(){e=p("tr"),o=p("td"),l=j(t),i=N(),a=p("td"),s=j(_),r=N(),c=p("td"),h=j(m),d=N(),k=p("td"),E=j(B),D=N(),this.h()},l(y){e=v(y,"TR",{});var w=b(e);o=v(w,"TD",{});var R=b(o);l=F(R,t),R.forEach(f),i=M(w),a=v(w,"TD",{});var g=b(a);s=F(g,_),g.forEach(f),r=M(w),c=v(w,"TD",{});var L=b(c);h=F(L,m),L.forEach(f),d=M(w),k=v(w,"TD",{});var S=b(k);E=F(S,B),S.forEach(f),D=M(w),w.forEach(f),this.h()},h(){Q(e,"max",n[2].level===n[1])},m(y,w){P(y,e,w),u(e,o),u(o,l),u(e,i),u(e,a),u(a,s),u(e,r),u(e,c),u(c,h),u(e,d),u(e,k),u(k,E),u(e,D)},p(y,w){w&1&&t!==(t=y[2].name+"")&&Y(l,t),w&1&&_!==(_=y[2].value+"")&&Y(s,_),w&1&&m!==(m=y[2].limit+"")&&Y(h,m),w&1&&B!==(B=y[2].level+"")&&Y(E,B),w&3&&Q(e,"max",y[2].level===y[1])},d(y){y&&f(e)}}}function Co(n){let e,o,t,l,i,a,_,s,r,c,m,h,d,k,B,E,D=n[0],y=[];for(let w=0;w<D.length;w+=1)y[w]=Rt(Dt(n,D,w));return{c(){e=p("table"),o=p("thead"),t=p("tr"),l=p("th"),i=j("Requirement"),a=N(),_=p("th"),s=j("Current"),r=N(),c=p("th"),m=j("Limit"),h=N(),d=p("th"),k=j("Min. Level"),B=N(),E=p("tbody");for(let w=0;w<y.length;w+=1)y[w].c();this.h()},l(w){e=v(w,"TABLE",{class:!0});var R=b(e);o=v(R,"THEAD",{});var g=b(o);t=v(g,"TR",{});var L=b(t);l=v(L,"TH",{});var S=b(l);i=F(S,"Requirement"),S.forEach(f),a=M(L),_=v(L,"TH",{});var O=b(_);s=F(O,"Current"),O.forEach(f),r=M(L),c=v(L,"TH",{});var C=b(c);m=F(C,"Limit"),C.forEach(f),h=M(L),d=v(L,"TH",{});var W=b(d);k=F(W,"Min. Level"),W.forEach(f),L.forEach(f),g.forEach(f),B=M(R),E=v(R,"TBODY",{});var q=b(E);for(let z=0;z<y.length;z+=1)y[z].l(q);q.forEach(f),R.forEach(f),this.h()},h(){T(e,"class","svelte-fdv1qg")},m(w,R){P(w,e,R),u(e,o),u(o,t),u(t,l),u(l,i),u(t,a),u(t,_),u(_,s),u(t,r),u(t,c),u(c,m),u(t,h),u(t,d),u(d,k),u(e,B),u(e,E);for(let g=0;g<y.length;g+=1)y[g]&&y[g].m(E,null)},p(w,[R]){if(R&3){D=w[0];let g;for(g=0;g<D.length;g+=1){const L=Dt(w,D,g);y[g]?y[g].p(L,R):(y[g]=Rt(L),y[g].c(),y[g].m(E,null))}for(;g<y.length;g+=1)y[g].d(1);y.length=D.length}},i:$,o:$,d(w){w&&f(e),_e(y,w)}}}function Bo(n,e,o){let t,{requirements:l}=e;return n.$$set=i=>{"requirements"in i&&o(0,l=i.requirements)},n.$$.update=()=>{var i;n.$$.dirty&1&&o(1,t=(i=l[0])==null?void 0:i.level)},[l,t]}class No extends he{constructor(e){super(),ge(this,e,Bo,Co,ce,{requirements:0})}}function Ot(n,e,o){const t=n.slice();return t[2]=e[o].type,t[0]=e[o].rooms,t}function It(n){let e,o,t=n[2].name+"",l,i,a,_=n[2].minLvl+"",s,r,c,m=n[2].cost+"",h,d,k,B=(n[0].length||"-")+"",E,D,y,w=(n[0].length>0?n[0].length*n[2].cost:"-")+"",R,g;return{c(){e=p("tr"),o=p("td"),l=j(t),i=N(),a=p("td"),s=j(_),r=N(),c=p("td"),h=j(m),d=N(),k=p("td"),E=j(B),D=N(),y=p("td"),R=j(w),g=N(),this.h()},l(L){e=v(L,"TR",{});var S=b(e);o=v(S,"TD",{});var O=b(o);l=F(O,t),O.forEach(f),i=M(S),a=v(S,"TD",{class:!0});var C=b(a);s=F(C,_),C.forEach(f),r=M(S),c=v(S,"TD",{class:!0});var W=b(c);h=F(W,m),W.forEach(f),d=M(S),k=v(S,"TD",{class:!0});var q=b(k);E=F(q,B),q.forEach(f),D=M(S),y=v(S,"TD",{class:!0});var z=b(y);R=F(z,w),z.forEach(f),g=M(S),S.forEach(f),this.h()},h(){T(a,"class","right"),T(c,"class","right"),T(k,"class","right"),T(y,"class","right")},m(L,S){P(L,e,S),u(e,o),u(o,l),u(e,i),u(e,a),u(a,s),u(e,r),u(e,c),u(c,h),u(e,d),u(e,k),u(k,E),u(e,D),u(e,y),u(y,R),u(e,g)},p(L,S){S&2&&t!==(t=L[2].name+"")&&Y(l,t),S&2&&_!==(_=L[2].minLvl+"")&&Y(s,_),S&2&&m!==(m=L[2].cost+"")&&Y(h,m),S&2&&B!==(B=(L[0].length||"-")+"")&&Y(E,B),S&2&&w!==(w=(L[0].length>0?L[0].length*L[2].cost:"-")+"")&&Y(R,w)},d(L){L&&f(e)}}}function Mo(n){let e,o,t,l,i,a,_,s,r,c,m,h,d,k,B,E,D,y,w,R,g=n[1],L=[];for(let S=0;S<g.length;S+=1)L[S]=It(Ot(n,g,S));return{c(){e=p("div"),o=p("table"),t=p("thead"),l=p("tr"),i=p("th"),a=j("Type"),_=N(),s=p("th"),r=j("Level"),c=N(),m=p("th"),h=j("Cost"),d=N(),k=p("th"),B=j("Amount"),E=N(),D=p("th"),y=j("Total"),w=N(),R=p("tbody");for(let S=0;S<L.length;S+=1)L[S].c();this.h()},l(S){e=v(S,"DIV",{class:!0});var O=b(e);o=v(O,"TABLE",{class:!0});var C=b(o);t=v(C,"THEAD",{});var W=b(t);l=v(W,"TR",{});var q=b(l);i=v(q,"TH",{});var z=b(i);a=F(z,"Type"),z.forEach(f),_=M(q),s=v(q,"TH",{class:!0});var G=b(s);r=F(G,"Level"),G.forEach(f),c=M(q),m=v(q,"TH",{class:!0});var U=b(m);h=F(U,"Cost"),U.forEach(f),d=M(q),k=v(q,"TH",{class:!0});var oe=b(k);B=F(oe,"Amount"),oe.forEach(f),E=M(q),D=v(q,"TH",{class:!0});var ne=b(D);y=F(ne,"Total"),ne.forEach(f),q.forEach(f),W.forEach(f),w=M(C),R=v(C,"TBODY",{});var le=b(R);for(let ee=0;ee<L.length;ee+=1)L[ee].l(le);le.forEach(f),C.forEach(f),O.forEach(f),this.h()},h(){T(s,"class","right"),T(m,"class","right"),T(k,"class","right"),T(D,"class","right"),T(o,"class","svelte-fdv1qg"),T(e,"class","scrollable-tab-content")},m(S,O){P(S,e,O),u(e,o),u(o,t),u(t,l),u(l,i),u(i,a),u(l,_),u(l,s),u(s,r),u(l,c),u(l,m),u(m,h),u(l,d),u(l,k),u(k,B),u(l,E),u(l,D),u(D,y),u(o,w),u(o,R);for(let C=0;C<L.length;C+=1)L[C]&&L[C].m(R,null)},p(S,[O]){if(O&2){g=S[1];let C;for(C=0;C<g.length;C+=1){const W=Ot(S,g,C);L[C]?L[C].p(W,O):(L[C]=It(W),L[C].c(),L[C].m(R,null))}for(;C<L.length;C+=1)L[C].d(1);L.length=g.length}},i:$,o:$,d(S){S&&f(e),_e(L,S)}}}function Po(n,e,o){let t,{rooms:l}=e;return n.$$set=i=>{"rooms"in i&&o(0,l=i.rooms)},n.$$.update=()=>{n.$$.dirty&1&&o(1,t=qe.map(i=>({type:i,rooms:l.filter(a=>(a==null?void 0:a.type.key)===i.key)})).sort((i,a)=>a.rooms.length-i.rooms.length))},[l,t]}class Wo extends he{constructor(e){super(),ge(this,e,Po,Mo,ce,{rooms:0})}}function Ke(n,{delay:e=0,duration:o=400,easing:t=co}={}){const l=+getComputedStyle(n).opacity;return{delay:e,duration:o,easing:t,css:i=>`opacity: ${i*l}`}}const jo=n=>({tab:n&4}),Ct=n=>({tab:n[2]});function Bt(n,e,o){const t=n.slice();return t[6]=e[o],t}function Nt(n){let e,o=n[6]+"",t,l,i,a;function _(){return n[5](n[6])}return{c(){e=p("button"),t=j(o),l=N(),this.h()},l(s){e=v(s,"BUTTON",{class:!0});var r=b(e);t=F(r,o),l=M(r),r.forEach(f),this.h()},h(){T(e,"class","svelte-1melpyn"),Q(e,"active",n[2]===n[6])},m(s,r){P(s,e,r),u(e,t),u(e,l),i||(a=K(e,"click",_),i=!0)},p(s,r){n=s,r&1&&o!==(o=n[6]+"")&&Y(t,o),r&5&&Q(e,"active",n[2]===n[6])},d(s){s&&f(e),i=!1,a()}}}function Mt(n){let e,o,t;const l=n[4].default,i=_o(l,n,n[3],Ct);return{c(){e=p("div"),i&&i.c(),this.h()},l(a){e=v(a,"DIV",{class:!0});var _=b(e);i&&i.l(_),_.forEach(f),this.h()},h(){T(e,"class","tab svelte-1melpyn")},m(a,_){P(a,e,_),i&&i.m(e,null),t=!0},p(a,_){i&&i.p&&(!t||_&12)&&mo(i,l,a,a[3],t?fo(l,a[3],_,jo):uo(a[3]),Ct)},i(a){t||(H(i,a),a&&mt(()=>{t&&(o||(o=Ue(e,Ke,{},!0)),o.run(1))}),t=!0)},o(a){A(i,a),a&&(o||(o=Ue(e,Ke,{},!1)),o.run(0)),t=!1},d(a){a&&f(e),i&&i.d(a),a&&o&&o.end()}}}function Fo(n){let e,o,t,l,i=n[2],a,_=n[0],s=[];for(let c=0;c<_.length;c+=1)s[c]=Nt(Bt(n,_,c));let r=Mt(n);return{c(){e=p("div"),o=p("div");for(let c=0;c<s.length;c+=1)s[c].c();t=N(),l=p("div"),r.c(),this.h()},l(c){e=v(c,"DIV",{class:!0});var m=b(e);o=v(m,"DIV",{class:!0});var h=b(o);for(let k=0;k<s.length;k+=1)s[k].l(h);h.forEach(f),t=M(m),l=v(m,"DIV",{class:!0});var d=b(l);r.l(d),d.forEach(f),m.forEach(f),this.h()},h(){T(o,"class","navigation"),T(l,"class","content svelte-1melpyn"),T(e,"class","container svelte-1melpyn"),Q(e,"inverted",n[1])},m(c,m){P(c,e,m),u(e,o);for(let h=0;h<s.length;h+=1)s[h]&&s[h].m(o,null);u(e,t),u(e,l),r.m(l,null),a=!0},p(c,[m]){if(m&5){_=c[0];let h;for(h=0;h<_.length;h+=1){const d=Bt(c,_,h);s[h]?s[h].p(d,m):(s[h]=Nt(d),s[h].c(),s[h].m(o,null))}for(;h<s.length;h+=1)s[h].d(1);s.length=_.length}m&4&&ce(i,i=c[2])?(fe(),A(r,1,1,$),de(),r=Mt(c),r.c(),H(r,1),r.m(l,null)):r.p(c,m),(!a||m&2)&&Q(e,"inverted",c[1])},i(c){a||(H(r),a=!0)},o(c){A(r),a=!1},d(c){c&&f(e),_e(s,c),r.d(c)}}}function Vo(n,e,o){let{$$slots:t={},$$scope:l}=e,{tabs:i}=e,{inverted:a=!1}=e,_=i[0];const s=r=>o(2,_=r);return n.$$set=r=>{"tabs"in r&&o(0,i=r.tabs),"inverted"in r&&o(1,a=r.inverted),"$$scope"in r&&o(3,l=r.$$scope)},[i,a,_,l,t,s]}class so extends he{constructor(e){super(),ge(this,e,Vo,Fo,ce,{tabs:0,inverted:1})}}function Pt(n,e,o){const t=n.slice();return t[8]=e[o],t}function qo(n){let e,o=n[1]&&Wt(n);return{c(){e=p("div"),o&&o.c(),this.h()},l(t){e=v(t,"DIV",{class:!0});var l=b(e);o&&o.l(l),l.forEach(f),this.h()},h(){T(e,"class","content svelte-qe21v1"),Q(e,"below",!!n[1]),Q(e,"supported",n[1]&&!n[1].type.open)},m(t,l){P(t,e,l),o&&o.m(e,null)},p(t,l){t[1]?o?o.p(t,l):(o=Wt(t),o.c(),o.m(e,null)):o&&(o.d(1),o=null),l&2&&Q(e,"below",!!t[1]),l&2&&Q(e,"supported",t[1]&&!t[1].type.open)},d(t){t&&f(e),o&&o.d()}}}function Go(n){let e,o,t,l,i=n[0].type.name+"",a,_,s,r=n[5],c=[];for(let m=0;m<r.length;m+=1)c[m]=jt(Pt(n,r,m));return{c(){e=p("div"),o=N(),t=p("div"),l=p("div"),a=j(i),_=N();for(let m=0;m<c.length;m+=1)c[m].c();s=se(),this.h()},l(m){e=v(m,"DIV",{class:!0}),b(e).forEach(f),o=M(m),t=v(m,"DIV",{class:!0});var h=b(t);l=v(h,"DIV",{class:!0});var d=b(l);a=F(d,i),d.forEach(f),h.forEach(f),_=M(m);for(let k=0;k<c.length;k+=1)c[k].l(m);s=se(),this.h()},h(){T(e,"class","marker svelte-qe21v1"),x(e,"background-color",n[0].type.color),T(l,"class","title svelte-qe21v1"),T(t,"class","content svelte-qe21v1"),x(t,"color",n[0].type.color),x(t,"background-color",n[0].type.bg)},m(m,h){P(m,e,h),P(m,o,h),P(m,t,h),u(t,l),u(l,a),P(m,_,h);for(let d=0;d<c.length;d+=1)c[d]&&c[d].m(m,h);P(m,s,h)},p(m,h){if(h&1&&x(e,"background-color",m[0].type.color),h&1&&i!==(i=m[0].type.name+"")&&Y(a,i),h&1&&x(t,"color",m[0].type.color),h&1&&x(t,"background-color",m[0].type.bg),h&36){r=m[5];let d;for(d=0;d<r.length;d+=1){const k=Pt(m,r,d);c[d]?c[d].p(k,h):(c[d]=jt(k),c[d].c(),c[d].m(s.parentNode,s))}for(;d<c.length;d+=1)c[d].d(1);c.length=r.length}},d(m){m&&f(e),m&&f(o),m&&f(t),m&&f(_),_e(c,m),m&&f(s)}}}function Wt(n){let e,o=n[1].type.name+"",t;return{c(){e=p("div"),t=j(o),this.h()},l(l){e=v(l,"DIV",{class:!0});var i=b(e);t=F(i,o),i.forEach(f),this.h()},h(){T(e,"class","title svelte-qe21v1")},m(l,i){P(l,e,i),u(e,t)},p(l,i){i&2&&o!==(o=l[1].type.name+"")&&Y(t,o)},d(l){l&&f(e)}}}function jt(n){let e,o;return{c(){e=p("div"),this.h()},l(t){e=v(t,"DIV",{class:!0}),b(e).forEach(f),this.h()},h(){T(e,"class",o="door "+at(n[8])+" svelte-qe21v1"),Q(e,"connected",n[2].includes(n[8]))},m(t,l){P(t,e,l)},p(t,l){l&32&&o!==(o="door "+at(t[8])+" svelte-qe21v1")&&T(e,"class",o),l&36&&Q(e,"connected",t[2].includes(t[8]))},d(t){t&&f(e)}}}function Ft(n){let e;return{c(){e=p("div"),this.h()},l(o){e=v(o,"DIV",{class:!0}),b(e).forEach(f),this.h()},h(){T(e,"class","selected svelte-qe21v1")},m(o,t){P(o,e,t)},d(o){o&&f(e)}}}function Ho(n){let e,o,t,l,i;function a(c,m){return c[0]?Go:qo}let _=a(n),s=_(n),r=n[3]&&Ft();return{c(){e=p("div"),s.c(),o=N(),r&&r.c(),this.h()},l(c){e=v(c,"DIV",{class:!0});var m=b(e);s.l(m),o=M(m),r&&r.l(m),m.forEach(f),this.h()},h(){T(e,"class",t="cell "+n[4]+" svelte-qe21v1")},m(c,m){P(c,e,m),s.m(e,null),u(e,o),r&&r.m(e,null),l||(i=[K(e,"click",De(n[6])),K(e,"keypress",De(n[6]))],l=!0)},p(c,[m]){_===(_=a(c))&&s?s.p(c,m):(s.d(1),s=_(c),s&&(s.c(),s.m(e,o))),c[3]?r||(r=Ft(),r.c(),r.m(e,null)):r&&(r.d(1),r=null),m&16&&t!==(t="cell "+c[4]+" svelte-qe21v1")&&T(e,"class",t)},i:$,o:$,d(c){c&&f(e),s.d(),r&&r.d(),l=!1,Pe(i)}}}function Ao(n,e,o){let t,l,{room:i}=e,{below:a}=e,{connections:_}=e,{selected:s}=e;const r=Qe(),c=()=>r("selected");return n.$$set=m=>{"room"in m&&o(0,i=m.room),"below"in m&&o(1,a=m.below),"connections"in m&&o(2,_=m.connections),"selected"in m&&o(3,s=m.selected)},n.$$.update=()=>{n.$$.dirty&1&&o(5,t=rt(i)),n.$$.dirty&1&&o(4,l=i?at(i.orientation):"")},[i,a,_,s,l,t,c]}class Yo extends he{constructor(e){super(),ge(this,e,Ao,Ho,ce,{room:0,below:1,connections:2,selected:3})}}function Vt(n,e,o){const t=n.slice();return t[18]=e[o],t}function Uo(n){const e=n.slice(),o=e[6](e[0]);return e[18]=o,e}function zo(n){let e;return{c(){e=j("None")},l(o){e=F(o,"None")},m(o,t){P(o,e,t)},p:$,d(o){o&&f(e)}}}function qt(n){let e,o,t,l,i=(ie(n[18])?n[18].name:n[18])+"",a;function _(c,m){if(m&1&&(e=null),m&1&&(o=null),e==null&&(e=!!(ie(c[18])&&c[18].img)),e)return $o;if(o==null&&(o=!!(ie(c[18])&&c[18].icon)),o)return Xo}let s=_(n,-1),r=s&&s(n);return{c(){r&&r.c(),t=N(),l=p("span"),a=j(i),this.h()},l(c){r&&r.l(c),t=M(c),l=v(c,"SPAN",{class:!0});var m=b(l);a=F(m,i),m.forEach(f),this.h()},h(){T(l,"class","option-name svelte-orhjt4")},m(c,m){r&&r.m(c,m),P(c,t,m),P(c,l,m),u(l,a)},p(c,m){s===(s=_(c,m))&&r?r.p(c,m):(r&&r.d(1),r=s&&s(c),r&&(r.c(),r.m(t.parentNode,t))),m&1&&i!==(i=(ie(c[18])?c[18].name:c[18])+"")&&Y(a,i)},d(c){r&&r.d(c),c&&f(t),c&&f(l)}}}function Xo(n){let e,o;return{c(){e=p("i"),this.h()},l(t){e=v(t,"I",{class:!0}),b(e).forEach(f),this.h()},h(){T(e,"class",o=ze(n[18].icon)+" svelte-orhjt4")},m(t,l){P(t,e,l)},p(t,l){l&1&&o!==(o=ze(t[18].icon)+" svelte-orhjt4")&&T(e,"class",o)},d(t){t&&f(e)}}}function $o(n){let e,o,t;return{c(){e=p("img"),this.h()},l(l){e=v(l,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Xe(e.src,o=n[18].img)||T(e,"src",o),T(e,"alt",t=n[18].name),T(e,"class","option-icon svelte-orhjt4")},m(l,i){P(l,e,i)},p(l,i){i&1&&!Xe(e.src,o=l[18].img)&&T(e,"src",o),i&1&&t!==(t=l[18].name)&&T(e,"alt",t)},d(l){l&&f(e)}}}function Gt(n){let e,o,t,l,i,a,_,s=n[4],r=[];for(let c=0;c<s.length;c+=1)r[c]=Ht(Vt(n,s,c));return{c(){e=p("div"),o=p("div"),t=p("span"),l=j("None"),i=N();for(let c=0;c<r.length;c+=1)r[c].c();this.h()},l(c){e=v(c,"DIV",{class:!0});var m=b(e);o=v(m,"DIV",{class:!0});var h=b(o);t=v(h,"SPAN",{class:!0});var d=b(t);l=F(d,"None"),d.forEach(f),h.forEach(f),i=M(m);for(let k=0;k<r.length;k+=1)r[k].l(m);m.forEach(f),this.h()},h(){T(t,"class","option-name svelte-orhjt4"),T(o,"class","dropdown-item svelte-orhjt4"),T(e,"class","dropdown-menu svelte-orhjt4"),Q(e,"upward",n[5])},m(c,m){P(c,e,m),u(e,o),u(o,t),u(t,l),u(e,i);for(let h=0;h<r.length;h+=1)r[h]&&r[h].m(e,null);a||(_=K(o,"click",n[13]),a=!0)},p(c,m){if(m&145){s=c[4];let h;for(h=0;h<s.length;h+=1){const d=Vt(c,s,h);r[h]?r[h].p(d,m):(r[h]=Ht(d),r[h].c(),r[h].m(e,null))}for(;h<r.length;h+=1)r[h].d(1);r.length=s.length}m&32&&Q(e,"upward",c[5])},d(c){c&&f(e),_e(r,c),a=!1,_()}}}function Jo(n){let e,o;return{c(){e=p("i"),this.h()},l(t){e=v(t,"I",{class:!0}),b(e).forEach(f),this.h()},h(){T(e,"class",o=ze(n[18].icon)+" svelte-orhjt4")},m(t,l){P(t,e,l)},p(t,l){l&16&&o!==(o=ze(t[18].icon)+" svelte-orhjt4")&&T(e,"class",o)},d(t){t&&f(e)}}}function Ko(n){let e,o,t;return{c(){e=p("img"),this.h()},l(l){e=v(l,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Xe(e.src,o=n[18].img)||T(e,"src",o),T(e,"alt",t=n[18].name),T(e,"class","option-icon svelte-orhjt4")},m(l,i){P(l,e,i)},p(l,i){i&16&&!Xe(e.src,o=l[18].img)&&T(e,"src",o),i&16&&t!==(t=l[18].name)&&T(e,"alt",t)},d(l){l&&f(e)}}}function Ht(n){let e,o,t,l,i,a=(ie(n[18])?n[18].name:n[18])+"",_,s,r,c;function m(B,E){if(E&16&&(o=null),E&16&&(t=null),o==null&&(o=!!(ie(B[18])&&B[18].img)),o)return Ko;if(t==null&&(t=!!(ie(B[18])&&B[18].icon)),t)return Jo}let h=m(n,-1),d=h&&h(n);function k(){return n[14](n[18])}return{c(){e=p("div"),d&&d.c(),l=N(),i=p("span"),_=j(a),s=N(),this.h()},l(B){e=v(B,"DIV",{class:!0});var E=b(e);d&&d.l(E),l=M(E),i=v(E,"SPAN",{class:!0});var D=b(i);_=F(D,a),D.forEach(f),s=M(E),E.forEach(f),this.h()},h(){T(i,"class","option-name svelte-orhjt4"),T(e,"class","dropdown-item svelte-orhjt4"),Q(e,"selected",n[0]===(ie(n[18])?n[18].id:n[18]))},m(B,E){P(B,e,E),d&&d.m(e,null),u(e,l),u(e,i),u(i,_),u(e,s),r||(c=K(e,"click",k),r=!0)},p(B,E){n=B,h===(h=m(n,E))&&d?d.p(n,E):(d&&d.d(1),d=h&&h(n),d&&(d.c(),d.m(e,l))),E&16&&a!==(a=(ie(n[18])?n[18].name:n[18])+"")&&Y(_,a),E&17&&Q(e,"selected",n[0]===(ie(n[18])?n[18].id:n[18]))},d(B){B&&f(e),d&&d.d(),r=!1,c()}}}function Qo(n){let e,o,t,l,i,a,_;function s(d,k){return k&1&&(l=null),l==null&&(l=!!(d[0]&&d[6](d[0]))),l?qt:zo}function r(d,k){return k===qt?Uo(d):d}let c=s(n,-1),m=c(r(n,c)),h=n[2]&&Gt(n);return{c(){e=p("div"),o=p("button"),t=p("div"),m.c(),i=N(),h&&h.c(),this.h()},l(d){e=v(d,"DIV",{class:!0});var k=b(e);o=v(k,"BUTTON",{type:!0,class:!0});var B=b(o);t=v(B,"DIV",{class:!0});var E=b(t);m.l(E),E.forEach(f),B.forEach(f),i=M(k),h&&h.l(k),k.forEach(f),this.h()},h(){T(t,"class","dropdown-text svelte-orhjt4"),T(o,"type","button"),T(o,"class","dropdown-toggle svelte-orhjt4"),T(e,"class","icon-dropdown svelte-orhjt4"),x(e,"width",n[1])},m(d,k){P(d,e,k),u(e,o),u(o,t),m.m(t,null),u(e,i),h&&h.m(e,null),n[15](e),a||(_=K(o,"click",De(n[12])),a=!0)},p(d,[k]){c===(c=s(d,k))&&m?m.p(r(d,c),k):(m.d(1),m=c(r(d,c)),m&&(m.c(),m.m(t,null))),d[2]?h?h.p(d,k):(h=Gt(d),h.c(),h.m(e,null)):h&&(h.d(1),h=null),k&2&&x(e,"width",d[1])},i:$,o:$,d(d){d&&f(e),m.d(),h&&h.d(),n[15](null),a=!1,_()}}}let Zo=28;function ie(n){return typeof n=="object"&&n!==null}function xo(n,e,o){let t,l,{options:i=[]}=e,{selected:a=""}=e,{width:_="200px"}=e,s=!1,r,c,m,h;function d(g){return t.find(L=>ie(L)?L.id===g:L===g)}function k(g){s&&r&&!r.contains(g.target)&&o(2,s=!1)}_t(()=>{document.addEventListener("click",k),o(11,h=window.innerHeight);function g(){r&&(o(10,m=r.getBoundingClientRect()),o(9,c=Math.min((t.length+1)*Zo,200))),o(11,h=window.innerHeight)}return window.addEventListener("resize",g),g(),()=>{document.removeEventListener("click",k),window.removeEventListener("resize",g)}});const B=Qe();function E(g){o(0,a=g),o(2,s=!1),B("change",g)}const D=()=>o(2,s=!s),y=()=>E(""),w=g=>E(ie(g)?g.id:g);function R(g){ho[g?"unshift":"push"](()=>{r=g,o(3,r)})}return n.$$set=g=>{"options"in g&&o(8,i=g.options),"selected"in g&&o(0,a=g.selected),"width"in g&&o(1,_=g.width)},n.$$.update=()=>{n.$$.dirty&256&&o(4,t=Array.isArray(i)?i.map(g=>{var L;return ie(g)?g:{id:g,name:((L=dt(g))==null?void 0:L.name)||g}}):[]),n.$$.dirty&3588&&o(5,l=s&&m&&m.bottom+c>h&&m.top>c)},[a,_,s,r,t,l,d,E,i,c,m,h,D,y,w,R]}class en extends he{constructor(e){super(),ge(this,e,xo,Qo,ce,{options:8,selected:0,width:1})}}function At(n,e,o){const t=n.slice();return t[27]=e[o],t[29]=o,t}function Yt(n,e,o){const t=n.slice();t[30]=e[o];const l=t[30].floors&&!t[30].floors.includes(t[0].num);return t[31]=l,t}function tn(n){let e,o,t,l,i,a,_,s,r,c,m,h,d,k,B,E=n[9],D=[];for(let g=0;g<E.length;g+=1)D[g]=Ut(Yt(n,E,g));let y=n[1]&&zt(n),w=n[0].num>=0&&n[3]&&Xt(),R=n[1]&&$t(n);return{c(){e=p("div"),o=p("select"),t=p("option"),l=j("Pick a room...");for(let g=0;g<D.length;g+=1)D[g].c();a=N(),y&&y.c(),_=N(),s=p("button"),r=p("i"),c=N(),w&&w.c(),m=N(),R&&R.c(),h=se(),this.h()},l(g){e=v(g,"DIV",{class:!0});var L=b(e);o=v(L,"SELECT",{class:!0});var S=b(o);t=v(S,"OPTION",{});var O=b(t);l=F(O,"Pick a room..."),O.forEach(f);for(let W=0;W<D.length;W+=1)D[W].l(S);S.forEach(f),a=M(L),y&&y.l(L),_=M(L),s=v(L,"BUTTON",{class:!0});var C=b(s);r=v(C,"I",{class:!0}),b(r).forEach(f),C.forEach(f),L.forEach(f),c=M(g),w&&w.l(g),m=M(g),R&&R.l(g),h=se(),this.h()},h(){t.__value="",t.value=t.__value,t.disabled=!0,t.selected=!0,T(o,"class","svelte-9hdm1t"),T(r,"class","icofont-ui-close"),T(s,"class","svelte-9hdm1t"),T(e,"class","svelte-9hdm1t")},m(g,L){var S;P(g,e,L),u(e,o),u(o,t),u(t,l);for(let O=0;O<D.length;O+=1)D[O]&&D[O].m(o,null);$e(o,((S=n[1])==null?void 0:S.type.key)||""),u(e,a),y&&y.m(e,null),u(e,_),u(e,s),u(s,r),P(g,c,L),w&&w.m(g,L),P(g,m,L),R&&R.m(g,L),P(g,h,L),d=!0,k||(B=[K(o,"change",n[18]),K(s,"click",De(n[10]))],k=!0)},p(g,L){var S,O;if(L[0]&513){E=g[9];let C;for(C=0;C<E.length;C+=1){const W=Yt(g,E,C);D[C]?D[C].p(W,L):(D[C]=Ut(W),D[C].c(),D[C].m(o,null))}for(;C<D.length;C+=1)D[C].d(1);D.length=E.length}(!d||L[0]&514&&i!==(i=((S=g[1])==null?void 0:S.type.key)||""))&&$e(o,((O=g[1])==null?void 0:O.type.key)||""),g[1]?y?y.p(g,L):(y=zt(g),y.c(),y.m(e,_)):y&&(y.d(1),y=null),g[0].num>=0&&g[3]?w||(w=Xt(),w.c(),w.m(m.parentNode,m)):w&&(w.d(1),w=null),g[1]?R?(R.p(g,L),L[0]&2&&H(R,1)):(R=$t(g),R.c(),H(R,1),R.m(h.parentNode,h)):R&&(fe(),A(R,1,1,()=>{R=null}),de())},i(g){d||(H(R),d=!0)},o(g){A(R),d=!1},d(g){g&&f(e),_e(D,g),y&&y.d(),g&&f(c),w&&w.d(g),g&&f(m),R&&R.d(g),g&&f(h),k=!1,Pe(B)}}}function on(n){let e,o;return{c(){e=p("p"),o=j("There is no supporting room below!"),this.h()},l(t){e=v(t,"P",{class:!0});var l=b(e);o=F(l,"There is no supporting room below!"),l.forEach(f),this.h()},h(){T(e,"class","svelte-9hdm1t")},m(t,l){P(t,e,l),u(e,o)},p:$,i:$,o:$,d(t){t&&f(e)}}}function Ut(n){var r;let e,o=n[30].name+"",t,l=n[31]?` (floors: ${(r=n[30].floors)==null?void 0:r.join(", ")})`:"",i,a,_,s;return{c(){e=p("option"),t=j(o),i=j(l),a=N(),this.h()},l(c){e=v(c,"OPTION",{});var m=b(e);t=F(m,o),i=F(m,l),a=M(m),m.forEach(f),this.h()},h(){e.disabled=_=n[31],e.__value=s=n[30].key,e.value=e.__value},m(c,m){P(c,e,m),u(e,t),u(e,i),u(e,a)},p(c,m){var h;m[0]&512&&o!==(o=c[30].name+"")&&Y(t,o),m[0]&513&&l!==(l=c[31]?` (floors: ${(h=c[30].floors)==null?void 0:h.join(", ")})`:"")&&Y(i,l),m[0]&513&&_!==(_=c[31])&&(e.disabled=_),m[0]&512&&s!==(s=c[30].key)&&(e.__value=s,e.value=e.__value)},d(c){c&&f(e)}}}function zt(n){let e,o,t,l,i,a,_,s;return{c(){e=p("button"),o=p("i"),t=N(),l=p("button"),i=p("i"),this.h()},l(r){e=v(r,"BUTTON",{class:!0});var c=b(e);o=v(c,"I",{class:!0}),b(o).forEach(f),c.forEach(f),t=M(r),l=v(r,"BUTTON",{class:!0});var m=b(l);i=v(m,"I",{class:!0}),b(i).forEach(f),m.forEach(f),this.h()},h(){T(o,"class","icofont-ui-rotation"),T(e,"class","svelte-9hdm1t"),T(i,"class","icofont-ui-delete"),l.disabled=a=n[0].num>=0&&!!n[3],T(l,"class","svelte-9hdm1t")},m(r,c){P(r,e,c),u(e,o),P(r,t,c),P(r,l,c),u(l,i),_||(s=[K(e,"click",De(n[11])),K(l,"click",De(n[19]))],_=!0)},p(r,c){c[0]&9&&a!==(a=r[0].num>=0&&!!r[3])&&(l.disabled=a)},d(r){r&&f(e),r&&f(t),r&&f(l),_=!1,Pe(s)}}}function Xt(n){let e,o,t,l,i;return{c(){e=p("div"),o=p("i"),t=N(),l=p("p"),i=j("This room is supportting the one above it!"),this.h()},l(a){e=v(a,"DIV",{class:!0});var _=b(e);o=v(_,"I",{class:!0}),b(o).forEach(f),t=M(_),l=v(_,"P",{class:!0});var s=b(l);i=F(s,"This room is supportting the one above it!"),s.forEach(f),_.forEach(f),this.h()},h(){T(o,"class","icofont-info svelte-9hdm1t"),T(l,"class","svelte-9hdm1t"),T(e,"class","svelte-9hdm1t")},m(a,_){P(a,e,_),u(e,o),u(e,t),u(e,l),u(l,i)},d(a){a&&f(e)}}}function $t(n){let e,o;return e=new so({props:{tabs:["Details","Hotspots"],inverted:!0,$$slots:{default:[an,({tab:t})=>({26:t}),({tab:t})=>[t?67108864:0]]},$$scope:{ctx:n}}}),{c(){pe(e.$$.fragment)},l(t){ve(e.$$.fragment,t)},m(t,l){be(e,t,l),o=!0},p(t,l){const i={};l[0]&67109122|l[1]&8&&(i.$$scope={dirty:l,ctx:t}),e.$set(i)},i(t){o||(H(e.$$.fragment,t),o=!0)},o(t){A(e.$$.fragment,t),o=!1},d(t){ke(e,t)}}}function nn(n){let e,o,t,l=n[8],i=[];for(let _=0;_<l.length;_+=1)i[_]=Jt(At(n,l,_));const a=_=>A(i[_],1,1,()=>{i[_]=null});return{c(){e=p("table"),o=p("tbody");for(let _=0;_<i.length;_+=1)i[_].c()},l(_){e=v(_,"TABLE",{});var s=b(e);o=v(s,"TBODY",{});var r=b(o);for(let c=0;c<i.length;c+=1)i[c].l(r);r.forEach(f),s.forEach(f)},m(_,s){P(_,e,s),u(e,o);for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(o,null);t=!0},p(_,s){if(s[0]&8450){l=_[8];let r;for(r=0;r<l.length;r+=1){const c=At(_,l,r);i[r]?(i[r].p(c,s),H(i[r],1)):(i[r]=Jt(c),i[r].c(),H(i[r],1),i[r].m(o,null))}for(fe(),r=l.length;r<i.length;r+=1)a(r);de()}},i(_){if(!t){for(let s=0;s<l.length;s+=1)H(i[s]);t=!0}},o(_){i=i.filter(Boolean);for(let s=0;s<i.length;s+=1)A(i[s]);t=!1},d(_){_&&f(e),_e(i,_)}}}function ln(n){let e,o,t,l,i,a,_,s=n[1].type.name+"",r,c,m,h,d,k,B,E=n[1].type.cost+"",D,y,w,R,g,L,S,O=n[1].type.minLvl+"",C;return{c(){e=p("table"),o=p("tbody"),t=p("tr"),l=p("td"),i=j("Name"),a=N(),_=p("td"),r=j(s),c=N(),m=p("tr"),h=p("td"),d=j("Cost"),k=N(),B=p("td"),D=j(E),y=N(),w=p("tr"),R=p("td"),g=j("Min. Level"),L=N(),S=p("td"),C=j(O)},l(W){e=v(W,"TABLE",{});var q=b(e);o=v(q,"TBODY",{});var z=b(o);t=v(z,"TR",{});var G=b(t);l=v(G,"TD",{});var U=b(l);i=F(U,"Name"),U.forEach(f),a=M(G),_=v(G,"TD",{});var oe=b(_);r=F(oe,s),oe.forEach(f),G.forEach(f),c=M(z),m=v(z,"TR",{});var ne=b(m);h=v(ne,"TD",{});var le=b(h);d=F(le,"Cost"),le.forEach(f),k=M(ne),B=v(ne,"TD",{});var ee=b(B);D=F(ee,E),ee.forEach(f),ne.forEach(f),y=M(z),w=v(z,"TR",{});var Te=b(w);R=v(Te,"TD",{});var ye=b(R);g=F(ye,"Min. Level"),ye.forEach(f),L=M(Te),S=v(Te,"TD",{});var Ce=b(S);C=F(Ce,O),Ce.forEach(f),Te.forEach(f),z.forEach(f),q.forEach(f)},m(W,q){P(W,e,q),u(e,o),u(o,t),u(t,l),u(l,i),u(t,a),u(t,_),u(_,r),u(o,c),u(o,m),u(m,h),u(h,d),u(m,k),u(m,B),u(B,D),u(o,y),u(o,w),u(w,R),u(R,g),u(w,L),u(w,S),u(S,C)},p(W,q){q[0]&2&&s!==(s=W[1].type.name+"")&&Y(r,s),q[0]&2&&E!==(E=W[1].type.cost+"")&&Y(D,E),q[0]&2&&O!==(O=W[1].type.minLvl+"")&&Y(C,O)},i:$,o:$,d(W){W&&f(e)}}}function Jt(n){var m;let e,o,t=n[27].name+"",l,i,a,_,s,r;function c(...h){return n[20](n[29],...h)}return _=new en({props:{options:n[27].options,selected:((m=n[1].hotspots[n[29]])==null?void 0:m.key)||""}}),_.$on("change",c),{c(){e=p("tr"),o=p("td"),l=j(t),i=N(),a=p("td"),pe(_.$$.fragment),s=N()},l(h){e=v(h,"TR",{});var d=b(e);o=v(d,"TD",{});var k=b(o);l=F(k,t),k.forEach(f),i=M(d),a=v(d,"TD",{});var B=b(a);ve(_.$$.fragment,B),B.forEach(f),s=M(d),d.forEach(f)},m(h,d){P(h,e,d),u(e,o),u(o,l),u(e,i),u(e,a),be(_,a,null),u(e,s),r=!0},p(h,d){var B;n=h,(!r||d[0]&256)&&t!==(t=n[27].name+"")&&Y(l,t);const k={};d[0]&256&&(k.options=n[27].options),d[0]&2&&(k.selected=((B=n[1].hotspots[n[29]])==null?void 0:B.key)||""),_.$set(k)},i(h){r||(H(_.$$.fragment,h),r=!0)},o(h){A(_.$$.fragment,h),r=!1},d(h){h&&f(e),ke(_)}}}function an(n){let e,o,t,l;const i=[ln,nn],a=[];function _(s,r){return s[26]==="Details"?0:s[26]==="Hotspots"?1:-1}return~(e=_(n))&&(o=a[e]=i[e](n)),{c(){o&&o.c(),t=se()},l(s){o&&o.l(s),t=se()},m(s,r){~e&&a[e].m(s,r),P(s,t,r),l=!0},p(s,r){let c=e;e=_(s),e===c?~e&&a[e].p(s,r):(o&&(fe(),A(a[c],1,1,()=>{a[c]=null}),de()),~e?(o=a[e],o?o.p(s,r):(o=a[e]=i[e](s),o.c()),H(o,1),o.m(t.parentNode,t)):o=null)},i(s){l||(H(o),l=!0)},o(s){A(o),l=!1},d(s){~e&&a[e].d(s),s&&f(t)}}}function rn(n){let e,o,t,l,i;const a=[on,tn],_=[];function s(r,c){var m;return r[0].num>0&&(!r[2]||(m=r[2].type)!=null&&m.open)?0:1}return t=s(n),l=_[t]=a[t](n),{c(){e=p("div"),o=p("div"),l.c(),this.h()},l(r){e=v(r,"DIV",{class:!0});var c=b(e);o=v(c,"DIV",{class:!0});var m=b(o);l.l(m),m.forEach(f),c.forEach(f),this.h()},h(){T(o,"class","content svelte-9hdm1t"),T(e,"class","popup svelte-9hdm1t"),x(e,"top",n[7]),x(e,"bottom",n[6]),x(e,"left",n[5]),x(e,"right",n[4])},m(r,c){P(r,e,c),u(e,o),_[t].m(o,null),i=!0},p(r,c){let m=t;t=s(r),t===m?_[t].p(r,c):(fe(),A(_[m],1,1,()=>{_[m]=null}),de(),l=_[t],l?l.p(r,c):(l=_[t]=a[t](r),l.c()),H(l,1),l.m(o,null)),c[0]&128&&x(e,"top",r[7]),c[0]&64&&x(e,"bottom",r[6]),c[0]&32&&x(e,"left",r[5]),c[0]&16&&x(e,"right",r[4])},i(r){i||(H(l),i=!0)},o(r){A(l),i=!1},d(r){r&&f(e),_[t].d()}}}function sn(n,e,o){let t,l,i,a,_,s,r,c;const m=we/2,h=Ie/2,d=100/we,k=100/Ie;let{floor:B}=e,{x:E}=e,{y:D}=e,{room:y}=e,{below:w}=e,{above:R}=e;const g=Qe(),L=()=>g("close"),S=()=>g("rotateRoom",{x:E,y:D}),O=G=>{g("changeRoomType",{x:E,y:D,type:G?ao(G):null})},C=(G,U)=>{g("changeFurniture",{x:E,y:D,hotspotIndex:G,type:U?dt(U):null})},W=G=>O(G.currentTarget.value),q=()=>O(null),z=(G,U)=>C(G,U.detail);return n.$$set=G=>{"floor"in G&&o(0,B=G.floor),"x"in G&&o(14,E=G.x),"y"in G&&o(15,D=G.y),"room"in G&&o(1,y=G.room),"below"in G&&o(2,w=G.below),"above"in G&&o(3,R=G.above)},n.$$.update=()=>{n.$$.dirty[0]&2&&o(8,l=(y==null?void 0:y.type.hotspots)||[]),n.$$.dirty[0]&32768&&o(17,i=D<h),n.$$.dirty[0]&16384&&o(16,a=E<m),n.$$.dirty[0]&163840&&o(7,_=i?`${k*(D+1)}%`:""),n.$$.dirty[0]&163840&&o(6,s=i?"":`${k*(Ie-D)}%`),n.$$.dirty[0]&81920&&o(5,r=a?`${d*E}%`:""),n.$$.dirty[0]&81920&&o(4,c=a?"":`${d*(we-E-1)}%`)},o(9,t=[...qe].sort((G,U)=>G.name.localeCompare(U.name))),[B,y,w,R,c,r,s,_,l,t,L,S,O,C,E,D,a,i,W,q,z]}class cn extends he{constructor(e){super(),ge(this,e,sn,rn,ce,{floor:0,x:14,y:15,room:1,below:2,above:3},null,[-1,-1])}}function Kt(n,e,o){const t=n.slice();return t[13]=e[o],t[15]=o,t}function Qt(n,e,o){const t=n.slice();return t[16]=e[o],t[18]=o,t}function Zt(n){var l;let e,o;function t(){return n[8](n[18],n[15])}return e=new Yo({props:{room:n[16],below:((l=n[1])==null?void 0:l.rooms[n[15]][n[18]])||null,selected:n[18]===n[3]&&n[15]===n[4],connections:n[7](n[18],n[15],n[16])}}),e.$on("selected",t),{c(){pe(e.$$.fragment)},l(i){ve(e.$$.fragment,i)},m(i,a){be(e,i,a),o=!0},p(i,a){var s;n=i;const _={};a&1&&(_.room=n[16]),a&2&&(_.below=((s=n[1])==null?void 0:s.rooms[n[15]][n[18]])||null),a&24&&(_.selected=n[18]===n[3]&&n[15]===n[4]),a&1&&(_.connections=n[7](n[18],n[15],n[16])),e.$set(_)},i(i){o||(H(e.$$.fragment,i),o=!0)},o(i){A(e.$$.fragment,i),o=!1},d(i){ke(e,i)}}}function xt(n){let e,o,t=n[13],l=[];for(let a=0;a<t.length;a+=1)l[a]=Zt(Qt(n,t,a));const i=a=>A(l[a],1,1,()=>{l[a]=null});return{c(){e=p("div");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){e=v(a,"DIV",{class:!0});var _=b(e);for(let s=0;s<l.length;s+=1)l[s].l(_);_.forEach(f),this.h()},h(){T(e,"class","row svelte-11ba7nn")},m(a,_){P(a,e,_);for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(e,null);o=!0},p(a,_){if(_&219){t=a[13];let s;for(s=0;s<t.length;s+=1){const r=Qt(a,t,s);l[s]?(l[s].p(r,_),H(l[s],1)):(l[s]=Zt(r),l[s].c(),H(l[s],1),l[s].m(e,null))}for(fe(),s=t.length;s<l.length;s+=1)i(s);de()}},i(a){if(!o){for(let _=0;_<t.length;_+=1)H(l[_]);o=!0}},o(a){l=l.filter(Boolean);for(let _=0;_<l.length;_+=1)A(l[_]);o=!1},d(a){a&&f(e),_e(l,a)}}}function eo(n){var t,l;let e,o;return e=new cn({props:{floor:n[0],x:n[3],y:n[4],room:n[5],below:((t=n[1])==null?void 0:t.rooms[n[4]][n[3]])||null,above:((l=n[2])==null?void 0:l.rooms[n[4]][n[3]])||null}}),e.$on("changeRoomType",n[9]),e.$on("rotateRoom",n[10]),e.$on("changeFurniture",n[11]),e.$on("close",n[12]),{c(){pe(e.$$.fragment)},l(i){ve(e.$$.fragment,i)},m(i,a){be(e,i,a),o=!0},p(i,a){var s,r;const _={};a&1&&(_.floor=i[0]),a&8&&(_.x=i[3]),a&16&&(_.y=i[4]),a&32&&(_.room=i[5]),a&26&&(_.below=((s=i[1])==null?void 0:s.rooms[i[4]][i[3]])||null),a&28&&(_.above=((r=i[2])==null?void 0:r.rooms[i[4]][i[3]])||null),e.$set(_)},i(i){o||(H(e.$$.fragment,i),o=!0)},o(i){A(e.$$.fragment,i),o=!1},d(i){ke(e,i)}}}function _n(n){let e,o,t,l,i=n[0].rooms,a=[];for(let r=0;r<i.length;r+=1)a[r]=xt(Kt(n,i,r));const _=r=>A(a[r],1,1,()=>{a[r]=null});let s=n[3]!==null&&n[4]!==null&&eo(n);return{c(){e=p("div");for(let r=0;r<a.length;r+=1)a[r].c();o=N(),s&&s.c(),this.h()},l(r){e=v(r,"DIV",{class:!0});var c=b(e);for(let m=0;m<a.length;m+=1)a[m].l(c);o=M(c),s&&s.l(c),c.forEach(f),this.h()},h(){T(e,"class","grid svelte-11ba7nn")},m(r,c){P(r,e,c);for(let m=0;m<a.length;m+=1)a[m]&&a[m].m(e,null);u(e,o),s&&s.m(e,null),l=!0},p(r,[c]){if(c&219){i=r[0].rooms;let m;for(m=0;m<i.length;m+=1){const h=Kt(r,i,m);a[m]?(a[m].p(h,c),H(a[m],1)):(a[m]=xt(h),a[m].c(),H(a[m],1),a[m].m(e,o))}for(fe(),m=i.length;m<a.length;m+=1)_(m);de()}r[3]!==null&&r[4]!==null?s?(s.p(r,c),c&24&&H(s,1)):(s=eo(r),s.c(),H(s,1),s.m(e,null)):s&&(fe(),A(s,1,1,()=>{s=null}),de())},i(r){if(!l){for(let c=0;c<i.length;c+=1)H(a[c]);H(s),mt(()=>{l&&(t||(t=Ue(e,Ke,{},!0)),t.run(1))}),l=!0}},o(r){a=a.filter(Boolean);for(let c=0;c<a.length;c+=1)A(a[c]);A(s),t||(t=Ue(e,Ke,{},!1)),t.run(0),l=!1},d(r){r&&f(e),_e(a,r),s&&s.d(),r&&t&&t.end()}}}function mn(n,e,o){let t,{floor:l}=e,{below:i}=e,{above:a}=e,_=null,s=null;const r=(E,D)=>{o(3,_=E),o(4,s=D)},c=(E,D,y)=>{if(!y)return[];const w={[Se.North]:D===0?null:l.rooms[D-1][E],[Se.East]:E>=we-1?null:l.rooms[D][E+1],[Se.South]:D>=Ie-1?null:l.rooms[D+1][E],[Se.West]:E===0?null:l.rooms[D][E-1]},R=[];for(const g of rt(y)){const L=w[g];if(L){for(const S of rt(L))if(g===ut(S,2)){R.push(g);break}}}return R},m=(E,D)=>r(E,D);function h(E){lt.call(this,n,E)}function d(E){lt.call(this,n,E)}function k(E){lt.call(this,n,E)}const B=()=>r(null,null);return n.$$set=E=>{"floor"in E&&o(0,l=E.floor),"below"in E&&o(1,i=E.below),"above"in E&&o(2,a=E.above)},n.$$.update=()=>{n.$$.dirty&25&&o(5,t=_!==null&&s!==null?l.rooms[s][_]:null)},[l,i,a,_,s,t,r,c,m,h,d,k,B]}class un extends he{constructor(e){super(),ge(this,e,mn,_n,ce,{floor:0,below:1,above:2})}}function to(n,e,o){const t=n.slice();return t[3]=e[o],t[17]=o,t}function oo(n){let e,o;return e=new un({props:{floor:n[3],below:n[0].floors[n[1]-1]||null,above:n[0].floors[n[1]+1]||null}}),e.$on("changeRoomType",n[6]),e.$on("rotateRoom",n[7]),e.$on("changeFurniture",n[8]),{c(){pe(e.$$.fragment)},l(t){ve(e.$$.fragment,t)},m(t,l){be(e,t,l),o=!0},p(t,l){const i={};l&8&&(i.floor=t[3]),l&3&&(i.below=t[0].floors[t[1]-1]||null),l&3&&(i.above=t[0].floors[t[1]+1]||null),e.$set(i)},i(t){o||(H(e.$$.fragment,t),o=!0)},o(t){A(e.$$.fragment,t),o=!1},d(t){ke(e,t)}}}function no(n){let e,o,t=n[3].num+"",l;return{c(){e=p("option"),o=j("Floor "),l=j(t),this.h()},l(i){e=v(i,"OPTION",{});var a=b(e);o=F(a,"Floor "),l=F(a,t),a.forEach(f),this.h()},h(){e.__value=n[17],e.value=e.__value},m(i,a){P(i,e,a),u(e,o),u(e,l)},p(i,a){a&1&&t!==(t=i[3].num+"")&&Y(l,t)},d(i){i&&f(e)}}}function fn(n){let e,o,t=n[15]+"",l;return{c(){e=p("p"),o=j("Unknown tab "),l=j(t)},l(i){e=v(i,"P",{});var a=b(e);o=F(a,"Unknown tab "),l=F(a,t),a.forEach(f)},m(i,a){P(i,e,a),u(e,o),u(e,l)},p(i,a){a&32768&&t!==(t=i[15]+"")&&Y(l,t)},i:$,o:$,d(i){i&&f(e)}}}function dn(n){let e,o;return e=new Wo({props:{rooms:n[0].floors.map(lo).flat(2)}}),{c(){pe(e.$$.fragment)},l(t){ve(e.$$.fragment,t)},m(t,l){be(e,t,l),o=!0},p(t,l){const i={};l&1&&(i.rooms=t[0].floors.map(lo).flat(2)),e.$set(i)},i(t){o||(H(e.$$.fragment,t),o=!0)},o(t){A(e.$$.fragment,t),o=!1},d(t){ke(e,t)}}}function hn(n){let e,o;return e=new No({props:{requirements:n[2].levelRequirements}}),{c(){pe(e.$$.fragment)},l(t){ve(e.$$.fragment,t)},m(t,l){be(e,t,l),o=!0},p(t,l){const i={};l&4&&(i.requirements=t[2].levelRequirements),e.$set(i)},i(t){o||(H(e.$$.fragment,t),o=!0)},o(t){A(e.$$.fragment,t),o=!1},d(t){ke(e,t)}}}function gn(n){let e,o;return e=new Do({props:{errors:n[2].errors}}),{c(){pe(e.$$.fragment)},l(t){ve(e.$$.fragment,t)},m(t,l){be(e,t,l),o=!0},p(t,l){const i={};l&4&&(i.errors=t[2].errors),e.$set(i)},i(t){o||(H(e.$$.fragment,t),o=!0)},o(t){A(e.$$.fragment,t),o=!1},d(t){ke(e,t)}}}function pn(n){let e,o;return e=new Io({props:{house:n[0]}}),e.$on("open",n[4]),e.$on("save",n[5]),{c(){pe(e.$$.fragment)},l(t){ve(e.$$.fragment,t)},m(t,l){be(e,t,l),o=!0},p(t,l){const i={};l&1&&(i.house=t[0]),e.$set(i)},i(t){o||(H(e.$$.fragment,t),o=!0)},o(t){A(e.$$.fragment,t),o=!1},d(t){ke(e,t)}}}function vn(n){let e,o,t,l;const i=[pn,gn,hn,dn,fn],a=[];function _(s,r){return s[15]==="General"?0:s[15]==="Errors"?1:s[15]==="Requirements"?2:s[15]==="Rooms"?3:4}return e=_(n),o=a[e]=i[e](n),{c(){o.c(),t=se()},l(s){o.l(s),t=se()},m(s,r){a[e].m(s,r),P(s,t,r),l=!0},p(s,r){let c=e;e=_(s),e===c?a[e].p(s,r):(fe(),A(a[c],1,1,()=>{a[c]=null}),de(),o=a[e],o?o.p(s,r):(o=a[e]=i[e](s),o.c()),H(o,1),o.m(t.parentNode,t))},i(s){l||(H(o),l=!0)},o(s){A(o),l=!1},d(s){a[e].d(s),s&&f(t)}}}function bn(n){var gt;let e,o=n[1],t,l,i,a,_,s,r,c,m,h,d,k,B,E,D,y,w,R,g,L,S,O=n[2].totalPrice+"",C,W,q,z,G,U,oe,ne,le=(((gt=n[2].levelRequirements[0])==null?void 0:gt.level)||0)+"",ee,Te,ye,Ce,Ze,me,We,xe,je=n[2].extent[0]+"",Ge,et,Fe=n[2].extent[1]+"",He,tt,Le,ue,ot,ht,ae=oo(n),Be=n[0].floors,Z=[];for(let V=0;V<Be.length;V+=1)Z[V]=no(to(n,Be,V));return Le=new so({props:{tabs:["General","Errors","Requirements","Rooms"],$$slots:{default:[vn,({tab:V})=>({15:V}),({tab:V})=>V?32768:0]},$$scope:{ctx:n}}}),{c(){e=p("div"),ae.c(),t=N(),l=p("div"),i=p("div"),a=p("button"),_=p("i"),r=N(),c=p("select");for(let V=0;V<Z.length;V+=1)Z[V].c();m=N(),h=p("button"),d=p("i"),B=N(),E=p("button"),D=p("i"),y=N(),w=p("div"),R=N(),g=p("div"),L=p("i"),S=N(),C=j(O),W=N(),q=p("div"),z=j("•"),G=N(),U=p("div"),oe=p("i"),ne=N(),ee=j(le),Te=N(),ye=p("div"),Ce=j("•"),Ze=N(),me=p("div"),We=p("i"),xe=N(),Ge=j(je),et=j("x"),He=j(Fe),tt=N(),pe(Le.$$.fragment),this.h()},l(V){e=v(V,"DIV",{class:!0});var J=b(e);ae.l(J),J.forEach(f),t=M(V),l=v(V,"DIV",{class:!0});var re=b(l);i=v(re,"DIV",{class:!0});var X=b(i);a=v(X,"BUTTON",{class:!0});var te=b(a);_=v(te,"I",{class:!0}),b(_).forEach(f),te.forEach(f),r=M(X),c=v(X,"SELECT",{class:!0});var Ve=b(c);for(let nt=0;nt<Z.length;nt+=1)Z[nt].l(Ve);Ve.forEach(f),m=M(X),h=v(X,"BUTTON",{class:!0});var pt=b(h);d=v(pt,"I",{class:!0}),b(d).forEach(f),pt.forEach(f),B=M(X),E=v(X,"BUTTON",{class:!0});var vt=b(E);D=v(vt,"I",{class:!0}),b(D).forEach(f),vt.forEach(f),y=M(X),w=v(X,"DIV",{class:!0}),b(w).forEach(f),R=M(X),g=v(X,"DIV",{class:!0});var Ae=b(g);L=v(Ae,"I",{class:!0}),b(L).forEach(f),S=M(Ae),C=F(Ae,O),Ae.forEach(f),W=M(X),q=v(X,"DIV",{class:!0});var bt=b(q);z=F(bt,"•"),bt.forEach(f),G=M(X),U=v(X,"DIV",{class:!0});var Ye=b(U);oe=v(Ye,"I",{class:!0}),b(oe).forEach(f),ne=M(Ye),ee=F(Ye,le),Ye.forEach(f),Te=M(X),ye=v(X,"DIV",{class:!0});var kt=b(ye);Ce=F(kt,"•"),kt.forEach(f),Ze=M(X),me=v(X,"DIV",{class:!0});var Ne=b(me);We=v(Ne,"I",{class:!0}),b(We).forEach(f),xe=M(Ne),Ge=F(Ne,je),et=F(Ne,"x"),He=F(Ne,Fe),Ne.forEach(f),X.forEach(f),tt=M(re),ve(Le.$$.fragment,re),re.forEach(f),this.h()},h(){T(e,"class","map svelte-10cuohi"),T(_,"class","icofont-arrow-up"),a.disabled=s=n[3].num>=it,T(a,"class","svelte-10cuohi"),T(c,"class","svelte-10cuohi"),n[1]===void 0&&mt(()=>n[11].call(c)),T(d,"class","icofont-arrow-down"),h.disabled=k=n[3].num<=Je,T(h,"class","svelte-10cuohi"),T(D,"class","icofont-ui-delete"),T(E,"class","svelte-10cuohi"),T(w,"class","svelte-10cuohi"),x(w,"flex","1"),T(L,"class","icofont-money-bag"),T(g,"class","svelte-10cuohi"),T(q,"class","svelte-10cuohi"),T(oe,"class","icofont-bars"),T(U,"class","svelte-10cuohi"),T(ye,"class","svelte-10cuohi"),T(We,"class","icofont-drag"),T(me,"class","svelte-10cuohi"),T(i,"class","floor-controls svelte-10cuohi"),T(l,"class","sidebar svelte-10cuohi")},m(V,J){P(V,e,J),ae.m(e,null),P(V,t,J),P(V,l,J),u(l,i),u(i,a),u(a,_),u(i,r),u(i,c);for(let re=0;re<Z.length;re+=1)Z[re]&&Z[re].m(c,null);$e(c,n[1],!0),u(i,m),u(i,h),u(h,d),u(i,B),u(i,E),u(E,D),u(i,y),u(i,w),u(i,R),u(i,g),u(g,L),u(g,S),u(g,C),u(i,W),u(i,q),u(q,z),u(i,G),u(i,U),u(U,oe),u(U,ne),u(U,ee),u(i,Te),u(i,ye),u(ye,Ce),u(i,Ze),u(i,me),u(me,We),u(me,xe),u(me,Ge),u(me,et),u(me,He),u(l,tt),be(Le,l,null),ue=!0,ot||(ht=[K(a,"click",De(n[10])),K(c,"change",n[11]),K(c,"change",n[12]),K(h,"click",De(n[13])),K(E,"click",n[9])],ot=!0)},p(V,[J]){var X;if(J&2&&ce(o,o=V[1])?(fe(),A(ae,1,1,$),de(),ae=oo(V),ae.c(),H(ae,1),ae.m(e,null)):ae.p(V,J),(!ue||J&8&&s!==(s=V[3].num>=it))&&(a.disabled=s),J&1){Be=V[0].floors;let te;for(te=0;te<Be.length;te+=1){const Ve=to(V,Be,te);Z[te]?Z[te].p(Ve,J):(Z[te]=no(Ve),Z[te].c(),Z[te].m(c,null))}for(;te<Z.length;te+=1)Z[te].d(1);Z.length=Be.length}J&2&&$e(c,V[1]),(!ue||J&8&&k!==(k=V[3].num<=Je))&&(h.disabled=k),(!ue||J&4)&&O!==(O=V[2].totalPrice+"")&&Y(C,O),(!ue||J&4)&&le!==(le=(((X=V[2].levelRequirements[0])==null?void 0:X.level)||0)+"")&&Y(ee,le),(!ue||J&4)&&je!==(je=V[2].extent[0]+"")&&Y(Ge,je),(!ue||J&4)&&Fe!==(Fe=V[2].extent[1]+"")&&Y(He,Fe);const re={};J&294917&&(re.$$scope={dirty:J,ctx:V}),Le.$set(re)},i(V){ue||(H(ae),H(Le.$$.fragment,V),ue=!0)},o(V){A(ae),A(Le.$$.fragment,V),ue=!1},d(V){V&&f(e),ae.d(V),V&&f(t),V&&f(l),_e(Z,V),ke(Le),ot=!1,Pe(ht)}}}const lo=n=>n.rooms;function kn(n,e,o){let t,l,i;go(n,vo,y=>o(14,i=y));let a=io(),_=Math.abs(Je);_t(()=>{i.url.search?o(0,a=ro(i.url.searchParams)):o(0,a.floors[1].rooms[4][4]=Et(a.floors[1],4,4,ao("garden")),a)});const s=y=>{o(0,a=y.detail.house),Me(`?${Oe(a)}`,{replaceState:!0})},r=y=>{Me(`?${Oe(a)}`,{replaceState:!0})},c=y=>{y.detail.type===null?o(0,a.floors[_].rooms[y.detail.y][y.detail.x]=null,a):o(0,a.floors[_].rooms[y.detail.y][y.detail.x]=Et(a.floors[_],y.detail.x,y.detail.y,y.detail.type),a),Me(`?${Oe(a)}`,{replaceState:!0})},m=y=>{const w=a.floors[_].rooms[y.detail.y][y.detail.x];w&&(w.orientation=ut(w.orientation),o(0,a.floors[_].rooms[y.detail.y][y.detail.x]=w,a),Me(`?${Oe(a)}`,{replaceState:!0}))},h=y=>{const w=a.floors[_].rooms[y.detail.y][y.detail.x];w&&(w.hotspots[y.detail.hotspotIndex]=y.detail.type,Me(`?${Oe(a)}`,{replaceState:!0}))},d=()=>{var y;if(confirm("Are you sure you want to delete all rooms on this floor?")){for(let w=0;w<Ie;w++)for(let R=0;R<we;R++)(a.floors[_].num<0||!((y=a.floors[_+1])!=null&&y.rooms[w][R]))&&o(0,a.floors[_].rooms[w][R]=null,a);Me(`?${Oe(a)}`,{replaceState:!0})}},k=()=>o(1,_++,_);function B(){_=po(this),o(1,_)}const E=y=>o(1,_=Number(y.currentTarget.value)),D=()=>o(1,_--,_);return n.$$.update=()=>{n.$$.dirty&3&&o(3,t=a.floors[_]),n.$$.dirty&1&&o(2,l=ko(a))},[a,_,l,t,s,r,c,m,h,d,k,B,E,D]}class Tn extends he{constructor(e){super(),ge(this,e,kn,bn,ce,{})}}export{Tn as default};
